"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[391],{47391:function(e,t,r){r.r(t),r.d(t,{BaseVolumeViewport:function(){return v.Z},CONSTANTS:function(){return c},EVENTS:function(){return u.default},Enums:function(){return l},ImageVolume:function(){return S.Z},RenderingEngine:function(){return p.ZP},Settings:function(){return V.Z},StackViewport:function(){return b.Z},Viewport:function(){return y.Z},VolumeViewport:function(){return m.Z},VolumeViewport3D:function(){return h.Z},addVolumesToViewports:function(){return r$.Z},cache:function(){return P.ZP},createVolumeActor:function(){return d.Z},createVolumeMapper:function(){return g.Z},eventTarget:function(){return x.Z},geometryLoader:function(){return s},getConfiguration:function(){return I.P_},getEnabledElement:function(){return M.ZP},getEnabledElementByIds:function(){return M.O},getEnabledElements:function(){return M.wN},getOrCreateCanvas:function(){return f.Z},getRenderingEngine:function(){return T.Pr},getRenderingEngines:function(){return T.Uu},getShouldUseCPURendering:function(){return I.L_},getShouldUseSharedArrayBuffer:function(){return I.hG},imageLoadPoolManager:function(){return D.Z},imageLoader:function(){return L},imageRetrievalPoolManager:function(){return w},init:function(){return I.S1},isCornerstoneInitialized:function(){return I.uF},metaData:function(){return B},registerImageLoader:function(){return L.registerImageLoader},requestPoolManager:function(){return D.Z},resetUseCPURendering:function(){return I.Y0},resetUseSharedArrayBuffer:function(){return I.zr},setConfiguration:function(){return I.Dg},setPreferSizeOverAccuracy:function(){return I.wy},setUseCPURendering:function(){return I.dQ},setUseSharedArrayBuffer:function(){return I.fK},setVolumesForViewports:function(){return rK},triggerEvent:function(){return rj.Z},utilities:function(){return rH},volumeLoader:function(){return k}});var a,n,o,i,s={};r.r(s),r.d(s,{createAndCacheGeometry:function(){return r_}});var l=r(4134),c=r(18745),u=r(39040),d=r(82062),f=r(22474),g=r(1572),p=r(30791),m=r(65195),h=r(42034),v=r(1771),b=r(16502),y=r(57995),x=r(74880),T=r(6606),P=r(82864),S=r(46138),C=r(70507),O=r(62416);let A=new C.P("imageRetrievalPool");A.setMaxSimultaneousRequests(O.Z.Interaction,200),A.setMaxSimultaneousRequests(O.Z.Thumbnail,200),A.setMaxSimultaneousRequests(O.Z.Prefetch,200),A.grabDelay=0;var w=A,D=r(14688),M=r(28186),B=r(88315),I=r(64060),V=r(78530),k=r(75520),L=r(76342);r(11735),r(21826),r(88937),r(92325);var R=r(4487),N=r(87353),U=r(73734),E=r(77160),G=r(85975);let F=Math.sqrt(50),z=Math.sqrt(10),W=Math.sqrt(2);function Z(e,t,r){let a,n,o;let i=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(i)),l=i/Math.pow(10,s),c=l>=F?10:l>=z?5:l>=W?2:1;return(s<0?(a=Math.round(e*(o=Math.pow(10,-s)/c)),n=Math.round(t*o),a/o<e&&++a,n/o>t&&--n,o=-o):(a=Math.round(e/(o=Math.pow(10,s)*c)),n=Math.round(t/o),a*o<e&&++a,n*o>t&&--n),n<a&&.5<=r&&r<2)?Z(e,t,2*r):[a,n,o]}function _(e,t,r){return Z(e=+e,t=+t,r=+r)[2]}function H(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function j(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function K(e){let t,r,a;function n(e,a,n=0,o=e.length){if(n<o){if(0!==t(a,a))return o;do{let t=n+o>>>1;0>r(e[t],a)?n=t+1:o=t}while(n<o)}return n}return 2!==e.length?(t=H,r=(t,r)=>H(e(t),r),a=(t,r)=>e(t)-r):(t=e===H||e===j?e:$,r=e,a=e),{left:n,center:function(e,t,r=0,o=e.length){let i=n(e,t,r,o-1);return i>r&&a(e[i-1],t)>-a(e[i],t)?i-1:i},right:function(e,a,n=0,o=e.length){if(n<o){if(0!==t(a,a))return o;do{let t=n+o>>>1;0>=r(e[t],a)?n=t+1:o=t}while(n<o)}return n}}}function $(){return 0}let q=K(H),X=q.right;function Y(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function J(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function Q(){}q.left,K(function(e){return null===e?NaN:+e}).center;var ee="\\s*([+-]?\\d+)\\s*",et="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ea=/^#([0-9a-f]{3,8})$/,en=RegExp(`^rgb\\(${ee},${ee},${ee}\\)$`),eo=RegExp(`^rgb\\(${er},${er},${er}\\)$`),ei=RegExp(`^rgba\\(${ee},${ee},${ee},${et}\\)$`),es=RegExp(`^rgba\\(${er},${er},${er},${et}\\)$`),el=RegExp(`^hsl\\(${et},${er},${er}\\)$`),ec=RegExp(`^hsla\\(${et},${er},${er},${et}\\)$`),eu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ed(){return this.rgb().formatHex()}function ef(){return this.rgb().formatRgb()}function eg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ea.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?ep(t):3===r?new ev(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?em(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?em(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=en.exec(e))?new ev(t[1],t[2],t[3],1):(t=eo.exec(e))?new ev(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ei.exec(e))?em(t[1],t[2],t[3],t[4]):(t=es.exec(e))?em(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=el.exec(e))?eS(t[1],t[2]/100,t[3]/100,1):(t=ec.exec(e))?eS(t[1],t[2]/100,t[3]/100,t[4]):eu.hasOwnProperty(e)?ep(eu[e]):"transparent"===e?new ev(NaN,NaN,NaN,0):null}function ep(e){return new ev(e>>16&255,e>>8&255,255&e,1)}function em(e,t,r,a){return a<=0&&(e=t=r=NaN),new ev(e,t,r,a)}function eh(e,t,r,a){var n;return 1==arguments.length?((n=e)instanceof Q||(n=eg(n)),n)?(n=n.rgb(),new ev(n.r,n.g,n.b,n.opacity)):new ev:new ev(e,t,r,null==a?1:a)}function ev(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}function eb(){return`#${eP(this.r)}${eP(this.g)}${eP(this.b)}`}function ey(){let e=ex(this.opacity);return`${1===e?"rgb(":"rgba("}${eT(this.r)}, ${eT(this.g)}, ${eT(this.b)}${1===e?")":`, ${e})`}`}function ex(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function eT(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function eP(e){return((e=eT(e))<16?"0":"")+e.toString(16)}function eS(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new eO(e,t,r,a)}function eC(e){if(e instanceof eO)return new eO(e.h,e.s,e.l,e.opacity);if(e instanceof Q||(e=eg(e)),!e)return new eO;if(e instanceof eO)return e;var t=(e=e.rgb()).r/255,r=e.g/255,a=e.b/255,n=Math.min(t,r,a),o=Math.max(t,r,a),i=NaN,s=o-n,l=(o+n)/2;return s?(i=t===o?(r-a)/s+(r<a)*6:r===o?(a-t)/s+2:(t-r)/s+4,s/=l<.5?o+n:2-o-n,i*=60):s=l>0&&l<1?0:i,new eO(i,s,l,e.opacity)}function eO(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}function eA(e){return(e=(e||0)%360)<0?e+360:e}function ew(e){return Math.max(0,Math.min(1,e||0))}function eD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}Y(Q,eg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ed,formatHex:ed,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return eC(this).formatHsl()},formatRgb:ef,toString:ef}),Y(ev,eh,J(Q,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ev(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new ev(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ev(eT(this.r),eT(this.g),eT(this.b),ex(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eb,formatHex:eb,formatHex8:function(){return`#${eP(this.r)}${eP(this.g)}${eP(this.b)}${eP((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:ey,toString:ey})),Y(eO,function(e,t,r,a){return 1==arguments.length?eC(e):new eO(e,t,r,null==a?1:a)},J(Q,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new eO(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new eO(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,n=2*r-a;return new ev(eD(e>=240?e-240:e+120,n,a),eD(e,n,a),eD(e<120?e+240:e-120,n,a),this.opacity)},clamp(){return new eO(eA(this.h),ew(this.s),ew(this.l),ex(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=ex(this.opacity);return`${1===e?"hsl(":"hsla("}${eA(this.h)}, ${100*ew(this.s)}%, ${100*ew(this.l)}%${1===e?")":`, ${e})`}`}}));var eM=r(27265),eB=e=>()=>e;function eI(e,t){var r=t-e;return r?function(t){return e+t*r}:eB(isNaN(e)?t:e)}var eV=function e(t){var r,a=1==(r=+(r=t))?eI:function(e,t){var a,n,o;return t-e?(a=e,n=t,a=Math.pow(a,o=r),n=Math.pow(n,o)-a,o=1/o,function(e){return Math.pow(a+e*n,o)}):eB(isNaN(e)?t:e)};function n(e,t){var r=a((e=eh(e)).r,(t=eh(t)).r),n=a(e.g,t.g),o=a(e.b,t.b),i=eI(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=n(t),e.b=o(t),e.opacity=i(t),e+""}}return n.gamma=e,n}(1);function ek(e){return function(t){var r,a,n=t.length,o=Array(n),i=Array(n),s=Array(n);for(r=0;r<n;++r)a=eh(t[r]),o[r]=a.r||0,i[r]=a.g||0,s[r]=a.b||0;return o=e(o),i=e(i),s=e(s),a.opacity=1,function(e){return a.r=o(e),a.g=i(e),a.b=s(e),a+""}}}function eL(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}ek(eM.Z),ek(function(e){var t=e.length;return function(r){var a=Math.floor(((r%=1)<0?++r:r)*t),n=e[(a+t-1)%t],o=e[a%t],i=e[(a+1)%t],s=e[(a+2)%t];return(0,eM.t)((r-a/t)*t,n,o,i,s)}});var eR=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,eN=RegExp(eR.source,"g");function eU(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function eE(e){return+e}var eG=[0,1];function eF(e){return e}function ez(e,t){var r;return(t-=e=+e)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r})}function eW(e,t,r){var a=e[0],n=e[1],o=t[0],i=t[1];return n<a?(a=ez(n,a),o=r(i,o)):(a=ez(a,n),o=r(o,i)),function(e){return o(a(e))}}function eZ(e,t,r){var a=Math.min(e.length,t.length)-1,n=Array(a),o=Array(a),i=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<a;)n[i]=ez(e[i],e[i+1]),o[i]=r(t[i],t[i+1]);return function(t){var r=X(e,t,1,a)-1;return o[r](n[r](t))}}function e_(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}var eH=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ej(e){var t;if(!(t=eH.exec(e)))throw Error("invalid format: "+e);return new eK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function eK(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function e$(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function eq(e){return(e=e$(Math.abs(e)))?e[1]:NaN}function eX(e,t){var r=e$(e,t);if(!r)return e+"";var a=r[0],n=r[1];return n<0?"0."+Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+Array(n-a.length+2).join("0")}ej.prototype=eK.prototype,eK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var eY={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>eX(100*e,t),r:eX,s:function(e,t){var r=e$(e,t);if(!r)return e+"";var n=r[0],o=r[1],i=o-(a=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,s=n.length;return i===s?n:i>s?n+Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+Array(1-i).join("0")+e$(e,Math.max(0,t+i-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function eJ(e){return e}var eQ=Array.prototype.map,e0=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function e1(){var e,t=(function(){var e,t,r,a,n,o,i=eG,s=eG,l=function e(t,r){var a,n,o=typeof r;return null==r||"boolean"===o?eB(r):("number"===o?eL:"string"===o?(n=eg(r))?(r=n,eV):function(e,t){var r,a,n,o,i,s=eR.lastIndex=eN.lastIndex=0,l=-1,c=[],u=[];for(e+="",t+="";(n=eR.exec(e))&&(o=eN.exec(t));)(i=o.index)>s&&(i=t.slice(s,i),c[l]?c[l]+=i:c[++l]=i),(n=n[0])===(o=o[0])?c[l]?c[l]+=o:c[++l]=o:(c[++l]=null,u.push({i:l,x:eL(n,o)})),s=eN.lastIndex;return s<t.length&&(i=t.slice(s),c[l]?c[l]+=i:c[++l]=i),c.length<2?u[0]?(r=u[0].x,function(e){return r(e)+""}):(a=t,function(){return a}):(t=u.length,function(e){for(var r,a=0;a<t;++a)c[(r=u[a]).i]=r.x(e);return c.join("")})}:r instanceof eg?eV:r instanceof Date?function(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}:(a=r,!ArrayBuffer.isView(a)||a instanceof DataView)?Array.isArray(r)?function(t,r){var a,n=r?r.length:0,o=t?Math.min(n,t.length):0,i=Array(o),s=Array(n);for(a=0;a<o;++a)i[a]=e(t[a],r[a]);for(;a<n;++a)s[a]=r[a];return function(e){for(a=0;a<o;++a)s[a]=i[a](e);return s}}:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?function(t,r){var a,n={},o={};for(a in(null===t||"object"!=typeof t)&&(t={}),(null===r||"object"!=typeof r)&&(r={}),r)a in t?n[a]=e(t[a],r[a]):o[a]=r[a];return function(e){for(a in n)o[a]=n[a](e);return o}}:eL:function(e,t){t||(t=[]);var r,a=e?Math.min(t.length,e.length):0,n=t.slice();return function(o){for(r=0;r<a;++r)n[r]=e[r]*(1-o)+t[r]*o;return n}})(t,r)},c=eF;function u(){var e,t,r,l=Math.min(i.length,s.length);return c!==eF&&((e=i[0])>(t=i[l-1])&&(r=e,e=t,t=r),c=function(r){return Math.max(e,Math.min(t,r))}),a=l>2?eZ:eW,n=o=null,d}function d(t){return null==t||isNaN(t=+t)?r:(n||(n=a(i.map(e),s,l)))(e(c(t)))}return d.invert=function(r){return c(t((o||(o=a(s,i.map(e),eL)))(r)))},d.domain=function(e){return arguments.length?(i=Array.from(e,eE),u()):i.slice()},d.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},d.rangeRound=function(e){return s=Array.from(e),l=eU,u()},d.clamp=function(e){return arguments.length?(c=!!e||eF,u()):c!==eF},d.interpolate=function(e){return arguments.length?(l=e,u()):l},d.unknown=function(e){return arguments.length?(r=e,d):r},function(r,a){return e=r,t=a,u()}})()(eF,eF);return t.copy=function(){return e1().domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())},e_.apply(t,arguments),e=t.domain,t.ticks=function(t){var r=e();return function(e,t,r){if(t=+t,e=+e,!((r=+r)>0))return[];if(e===t)return[e];let a=t<e,[n,o,i]=a?Z(t,e,r):Z(e,t,r);if(!(o>=n))return[];let s=o-n+1,l=Array(s);if(a){if(i<0)for(let e=0;e<s;++e)l[e]=-((o-e)/i);else for(let e=0;e<s;++e)l[e]=(o-e)*i}else if(i<0)for(let e=0;e<s;++e)l[e]=-((n+e)/i);else for(let e=0;e<s;++e)l[e]=(n+e)*i;return l}(r[0],r[r.length-1],null==t?10:t)},t.tickFormat=function(t,r){var a=e();return function(e,t,r,a){var n,s,l=function(e,t,r){t=+t,e=+e,r=+r;let a=t<e,n=a?_(t,e,r):_(e,t,r);return(a?-1:1)*(n<0?-(1/n):n)}(e,t,r);switch((a=ej(null==a?",f":a)).type){case"s":var c=Math.max(Math.abs(e),Math.abs(t));return null!=a.precision||isNaN(s=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(eq(c)/3)))-eq(Math.abs(l))))||(a.precision=s),i(a,c);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN((n=l,s=Math.max(0,eq(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(n=Math.abs(n)))-eq(n))+1))||(a.precision=s-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(s=Math.max(0,-eq(Math.abs(l))))||(a.precision=s-("%"===a.type)*2)}return o(a)}(a[0],a[a.length-1],null==t?10:t,r)},t.nice=function(r){null==r&&(r=10);var a,n,o=e(),i=0,s=o.length-1,l=o[i],c=o[s],u=10;for(c<l&&(n=l,l=c,c=n,n=i,i=s,s=n);u-- >0;){if((n=_(l,c,r))===a)return o[i]=l,o[s]=c,e(o);if(n>0)l=Math.floor(l/n)*n,c=Math.ceil(c/n)*n;else if(n<0)l=Math.ceil(l*n)/n,c=Math.floor(c*n)/n;else break;a=n}return t},t}o=(n=function(e){var t,r,n,o=void 0===e.grouping||void 0===e.thousands?eJ:(t=eQ.call(e.grouping,Number),r=e.thousands+"",function(e,a){for(var n=e.length,o=[],i=0,s=t[0],l=0;n>0&&s>0&&(l+s+1>a&&(s=Math.max(1,a-l)),o.push(e.substring(n-=s,n+s)),!((l+=s+1)>a));)s=t[i=(i+1)%t.length];return o.reverse().join(r)}),i=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",c=void 0===e.numerals?eJ:(n=eQ.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}),u=void 0===e.percent?"%":e.percent+"",d=void 0===e.minus?"−":e.minus+"",f=void 0===e.nan?"NaN":e.nan+"";function g(e){var t=(e=ej(e)).fill,r=e.align,n=e.sign,g=e.symbol,p=e.zero,m=e.width,h=e.comma,v=e.precision,b=e.trim,y=e.type;"n"===y?(h=!0,y="g"):eY[y]||(void 0===v&&(v=12),b=!0,y="g"),(p||"0"===t&&"="===r)&&(p=!0,t="0",r="=");var x="$"===g?i:"#"===g&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",T="$"===g?s:/[%p]/.test(y)?u:"",P=eY[y],S=/[defgprs%]/.test(y);function C(e){var i,s,u,g=x,C=T;if("c"===y)C=P(e)+C,e="";else{var O=(e=+e)<0||1/e<0;if(e=isNaN(e)?f:P(Math.abs(e),v),b&&(e=function(e){e:for(var t,r=e.length,a=1,n=-1;a<r;++a)switch(e[a]){case".":n=t=a;break;case"0":0===n&&(n=a),t=a;break;default:if(!+e[a])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),O&&0==+e&&"+"!==n&&(O=!1),g=(O?"("===n?n:d:"-"===n||"("===n?"":n)+g,C=("s"===y?e0[8+a/3]:"")+C+(O&&"("===n?")":""),S){for(i=-1,s=e.length;++i<s;)if(48>(u=e.charCodeAt(i))||u>57){C=(46===u?l+e.slice(i+1):e.slice(i))+C,e=e.slice(0,i);break}}}h&&!p&&(e=o(e,1/0));var A=g.length+e.length+C.length,w=A<m?Array(m-A+1).join(t):"";switch(h&&p&&(e=o(w+e,w.length?m-C.length:1/0),w=""),r){case"<":e=g+e+C+w;break;case"=":e=g+w+e+C;break;case"^":e=w.slice(0,A=w.length>>1)+g+e+C+w.slice(A);break;default:e=w+g+e+C}return c(e)}return v=void 0===v?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),C.toString=function(){return e+""},C}return{format:g,formatPrefix:function(e,t){var r=g(((e=ej(e)).type="f",e)),a=3*Math.max(-8,Math.min(8,Math.floor(eq(t)/3))),n=Math.pow(10,-a),o=e0[8+a/3];return function(e){return r(n*e)+o}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,i=n.formatPrefix;var e2=r(78654),e3=r(11905),e4=r(19194),e5=r(67241),e6=r(91411),e8=r(97908);function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var e9={image:null,canvas:null,jsImageData:null,imageLoaded:!1,repeat:!1,interpolate:!1,edgeClamp:!1,mipLevel:0,resizable:!1};function te(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,e9,r),R.default.obj(e,t),R.default.algo(e,t,6,0),R.default.get(e,t,["canvas","image","jsImageData","imageLoaded","resizable"]),R.default.setGet(e,t,["repeat","edgeClamp","interpolate","mipLevel"]),t.classHierarchy.push("vtkTexture"),e.imageLoaded=function(){t.image.removeEventListener("load",e.imageLoaded),t.imageLoaded=!0,e.modified()},e.setJsImageData=function(r){t.jsImageData!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.canvas=null),t.jsImageData=r,t.imageLoaded=!0,e.modified())},e.setCanvas=function(r){t.canvas!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.image=null,t.jsImageData=null),t.canvas=r,e.modified())},e.setImage=function(r){t.image!==r&&(null!==r&&(e.setInputData(null),e.setInputConnection(null),t.canvas=null,t.jsImageData=null),t.image=r,t.imageLoaded=!1,r.complete?e.imageLoaded():r.addEventListener("load",e.imageLoaded),e.modified())},e.getDimensionality=function(){var r=0,a=0,n=1;if(e.getInputData()){var o=e.getInputData();r=o.getDimensions()[0],a=o.getDimensions()[1],n=o.getDimensions()[2]}return t.jsImageData&&(r=t.jsImageData.width,a=t.jsImageData.height),t.canvas&&(r=t.canvas.width,a=t.canvas.height),t.image&&(r=t.image.width,a=t.image.height),(r>1)+(a>1)+(n>1)},e.getInputAsJsImageData=function(){if(!t.imageLoaded||e.getInputData())return null;if(t.jsImageData)return t.jsImageData();if(t.canvas)return t.canvas.getContext("2d").getImageData(0,0,t.canvas.width,t.canvas.height);if(t.image){var r=document.createElement("canvas");r.width=t.image.width,r.height=t.image.height;var a=r.getContext("2d");return a.translate(0,r.height),a.scale(1,-1),a.drawImage(t.image,0,0,t.image.width,t.image.height),a.getImageData(0,0,r.width,r.height)}return null}}var tt=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(t){(0,U.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({newInstance:R.default.newInstance(te,"vtkTexture"),extend:te},{generateMipmaps:function(e,t,r,a){for(var n=[1,2,1],o=e.length/(t*r),i=t,s=r,l=e,c=[l],u=0;u<a;u++){var d=(0,N.Z)(l);i/=2,s/=2,l=new Uint8ClampedArray(i*s*o);for(var f=o*i,g=0,p=0;p<l.length;p+=o){p%f==0&&(g+=2*o*i);for(var m=0;m<o;m++){var h=d[g+m];h+=d[g+o+m]+d[g-2*f+m]+d[g-2*f+o+m],h/=4,l[p+m]=h}g+=2*o}for(var v=(0,N.Z)(l),b=0;b<l.length;b+=o)for(var y=0;y<o;y++){for(var x=-(n.length-1)/2,T=4,P=0,S=0;S<n.length;S++){var C=b+y+x*o,O=C%f-(b+y)%f;O>o&&(C+=f),O<-o&&(C-=f),v[C]?P+=v[C]*n[S]:T-=n[S],x+=1}l[b+y]=P/T}v=(0,N.Z)(l);for(var A=0;A<l.length;A+=o)for(var w=0;w<o;w++){for(var D=-(n.length-1)/2,M=4,B=0,I=0;I<n.length;I++){var V=A+w+D*f;v[V]?B+=v[V]*n[I]:M-=n[I],D+=1}l[A+w]=B/M}c.push(l)}return c}});function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function ta(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach(function(t){(0,U.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var tn=[[-1,0,0],[1,0,0],[0,-1,0],[0,1,0],[0,0,-1],[0,0,1]],to=[[8,7,11,3],[9,1,10,5],[4,9,0,8],[2,11,6,10],[0,3,2,1],[4,5,6,7]],ti=[[0,1],[1,3],[2,3],[0,2],[4,5],[5,7],[6,7],[4,6],[0,4],[1,5],[3,7],[2,6]],ts=[0,1,0,1,0,1,0,1,2,2,2,2],tl=[[1,2],[1,2],[0,2],[0,2],[0,1],[0,1]],tc=new Float64Array(3),tu=new Float64Array(3),td=new Float64Array(3),tf=new Float64Array(3),tg=new Float64Array(3),tp=new Float64Array(3),tm=new Float64Array(16);function th(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}var tv=R.default.newInstance(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},r),R.default.obj(e,t),t.tmPolyData=e8.ZP.newInstance(),t.tmMapper=e6.ZP.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmActor=e3.ZP.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),R.default.setGet(e,t,["renderable"]),R.default.get(e,t,["lastSize","lastAspectRatio","axisTextStyle","tickTextStyle","tmActor","ticks"]),t.forceUpdate=!1,t.lastRedrawTime={},R.default.obj(t.lastRedrawTime,{mtime:0}),t.lastRebuildTime={},R.default.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.lastTickBounds=[],t.classHierarchy.push("vtkCubeAxesActorHelper"),e.setRenderable=function(r){t.renderable!==r&&(t.renderable=r,t.tmActor.addTexture(t.renderable.getTmTexture()),t.tmActor.setProperty(r.getProperty()),t.tmActor.setParentProp(r),e.modified())},e.createPolyDataForOneLabel=function(e,r,a,n,o,i,s){var l=t.renderable.get_tmAtlas().get(e);if(l){var c=t.renderable.getTextPolyData().getPoints().getData(),u=t.lastSize;tc[0]=c[3*r],tc[1]=c[3*r+1],tc[2]=c[3*r+2],E.transformMat4(td,tc,a),td[0]+=.1,E.transformMat4(tu,td,n),E.subtract(tg,tu,tc),td[0]-=.1,td[1]+=.1,E.transformMat4(tu,td,n),E.subtract(tp,tu,tc);for(var d=0;d<3;d++)tg[d]/=.05*u[0],tp[d]/=.05*u[1];var f=s.ptIdx,g=s.cellIdx;tc[0]=c[3*r],tc[1]=c[3*r+1],tc[2]=c[3*r+2],o[0]<-.5?E.scale(td,tg,o[0]*i-l.width):o[0]>.5?E.scale(td,tg,o[0]*i):E.scale(td,tg,o[0]*i-l.width/2),E.add(tc,tc,td),E.scale(td,tp,o[1]*i-l.height/2),E.add(tc,tc,td),s.points[3*f]=tc[0],s.points[3*f+1]=tc[1],s.points[3*f+2]=tc[2],s.tcoords[2*f]=l.tcoords[0],s.tcoords[2*f+1]=l.tcoords[1],f++,E.scale(td,tg,l.width),E.add(tc,tc,td),s.points[3*f]=tc[0],s.points[3*f+1]=tc[1],s.points[3*f+2]=tc[2],s.tcoords[2*f]=l.tcoords[2],s.tcoords[2*f+1]=l.tcoords[3],f++,E.scale(td,tp,l.height),E.add(tc,tc,td),s.points[3*f]=tc[0],s.points[3*f+1]=tc[1],s.points[3*f+2]=tc[2],s.tcoords[2*f]=l.tcoords[4],s.tcoords[2*f+1]=l.tcoords[5],f++,E.scale(td,tg,l.width),E.subtract(tc,tc,td),s.points[3*f]=tc[0],s.points[3*f+1]=tc[1],s.points[3*f+2]=tc[2],s.tcoords[2*f]=l.tcoords[6],s.tcoords[2*f+1]=l.tcoords[7],f++,s.polys[4*g]=3,s.polys[4*g+1]=f-4,s.polys[4*g+2]=f-3,s.polys[4*g+3]=f-2,g++,s.polys[4*g]=3,s.polys[4*g+1]=f-4,s.polys[4*g+2]=f-2,s.polys[4*g+3]=f-1,s.ptIdx+=4,s.cellIdx+=2}},e.updateTexturePolyData=function(){var r=t.camera.getCompositeProjectionMatrix(t.lastAspectRatio,-1,1);G.transpose(r,r);var a=t.renderable.getTextValues().length,n=4*a,o=new Float64Array(3*n),i=new Uint16Array(4*(2*a)),s=new Float32Array(2*n);G.invert(tm,r);for(var l={ptIdx:0,cellIdx:0,polys:i,points:o,tcoords:s},c=0,u=0,d=0,f=t.renderable.getTextPolyData().getPoints().getData(),g=t.renderable.getTextValues();c<f.length/3;){tc[0]=f[3*c],tc[1]=f[3*c+1],tc[2]=f[3*c+2],E.transformMat4(td,tc,r),tc[0]=f[3*c+3],tc[1]=f[3*c+4],tc[2]=f[3*c+5],E.transformMat4(tf,tc,r),E.subtract(td,td,tf);var p=[td[0],td[1]];(0,e2.L)(p),e.createPolyDataForOneLabel(g[u],c,r,tm,p,t.renderable.getAxisTitlePixelOffset(),l),c+=2,u++;for(var m=0;m<t.renderable.getTickCounts()[d];m++)e.createPolyDataForOneLabel(g[u],c,r,tm,p,t.renderable.getTickLabelPixelOffset(),l),c++,u++;d++}var h=e5.ZP.newInstance({numberOfComponents:2,values:s,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(h),t.tmPolyData.getPoints().setData(o,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(i,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updateAPISpecificData=function(r,a,n){(t.lastSize[0]!==r[0]||t.lastSize[1]!==r[1])&&(t.lastSize[0]=r[0],t.lastSize[1]=r[1],t.lastAspectRatio=r[0]/r[1],t.forceUpdate=!0),t.camera=a,e.updateTexturePolyData()}},"vtkCubeAxesActorHelper");function tb(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,ta({boundsScaleFactor:1.3,camera:null,dataBounds:(0,N.Z)(e4.ZP.INIT_BOUNDS),faceVisibilityAngle:8,gridLines:!0,axisLabels:null,axisTitlePixelOffset:35,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:12,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"}},a)),e3.ZP.extend(e,t,a),t.lastFacesToDraw=[!1,!1,!1,!1,!1,!1],t.axisLabels=["X-Axis","Y-Axis","Z-Axis"],t.tickCounts=[],t.textValues=[],t.lastTickBounds=[],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.tmTexture=tt.newInstance(),t.tmTexture.setInterpolate(!1),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),t.gridMapper=e6.ZP.newInstance(),t.polyData=e8.ZP.newInstance(),t.gridMapper.setInputData(t.polyData),t.gridActor=e3.ZP.newInstance(),t.gridActor.setMapper(t.gridMapper),t.gridActor.setProperty(e.getProperty()),t.gridActor.setParentProp(e),t.textPolyData=e8.ZP.newInstance(),R.default.setGet(e,t,["axisTitlePixelOffset","boundsScaleFactor","faceVisibilityAngle","gridLines","tickLabelPixelOffset"]),R.default.setGetArray(e,t,["dataBounds"],6),R.default.setGetArray(e,t,["axisLabels"],3),R.default.get(e,t,["axisTextStyle","tickTextStyle","camera","tmTexture","textValues","textPolyData","tickCounts","gridActor"]),t.classHierarchy.push("vtkCubeAxesActor"),e.setCamera=function(r){t.camera!==r&&(t.cameraModifiedSub&&(t.cameraModifiedSub.unsubscribe(),t.cameraModifiedSub=null),t.camera=r,r&&(t.cameraModifiedSub=r.onModified(e.update)),e.update(),e.modified())},e.computeFacesToDraw=function(){var e=t.camera.getViewMatrix();G.transpose(e,e);for(var r=!1,a=e4.ZP.getDiagonalLength(t.dataBounds),n=Math.sin(t.faceVisibilityAngle*Math.PI/180),o=0;o<6;o++){var i=!1,s=Math.floor(o/2),l=(s+1)%3,c=(s+2)%3;t.dataBounds[2*l]===t.dataBounds[2*l+1]||t.dataBounds[2*c]===t.dataBounds[2*c+1]||(tc[s]=t.dataBounds[o]-.1*a*tn[o][s],tc[l]=.5*(t.dataBounds[2*l]+t.dataBounds[2*l+1]),tc[c]=.5*(t.dataBounds[2*c]+t.dataBounds[2*c+1]),E.transformMat4(td,tc,e),tc[s]=t.dataBounds[o],E.transformMat4(tf,tc,e),E.subtract(td,tf,td),E.normalize(td,td),i=td[2]>n,t.camera.getParallelProjection()||(E.normalize(tf,tf),i=E.dot(tf,td)>n)),i!==t.lastFacesToDraw[o]&&(t.lastFacesToDraw[o]=i,r=!0)}return r},e.updatePolyData=function(e,r,a){var n,o=0;n=8;for(var i=0,s=0;s<12;s++)r[s]>0&&i++;if(o+=i,t.gridLines)for(var l=0;l<6;l++)e[l]&&(n+=2*a[tl[l][0]].length+2*a[tl[l][1]].length,o+=a[tl[l][0]].length+a[tl[l][1]].length);for(var c=new Float64Array(3*n),u=new Uint32Array(3*o),d=0,f=0,g=0;g<2;g++)for(var p=0;p<2;p++)for(var m=0;m<2;m++)c[3*d]=t.dataBounds[m],c[3*d+1]=t.dataBounds[2+p],c[3*d+2]=t.dataBounds[4+g],d++;for(var h=0;h<12;h++)r[h]>0&&(u[3*f]=2,u[3*f+1]=ti[h][0],u[3*f+2]=ti[h][1],f++);if(t.gridLines){for(var v=0;v<6;v++)if(e[v]){for(var b=Math.floor(v/2),y=a[tl[v][0]],x=0;x<y.length;x++)c[3*d+b]=t.dataBounds[v],c[3*d+tl[v][0]]=y[x],c[3*d+tl[v][1]]=t.dataBounds[2*tl[v][1]],c[3*++d+b]=t.dataBounds[v],c[3*d+tl[v][0]]=y[x],c[3*d+tl[v][1]]=t.dataBounds[2*tl[v][1]+1],d++,u[3*f]=2,u[3*f+1]=d-2,u[3*f+2]=d-1,f++;y=a[tl[v][1]];for(var T=0;T<y.length;T++)c[3*d+b]=t.dataBounds[v],c[3*d+tl[v][1]]=y[T],c[3*d+tl[v][0]]=t.dataBounds[2*tl[v][0]],c[3*++d+b]=t.dataBounds[v],c[3*d+tl[v][1]]=y[T],c[3*d+tl[v][0]]=t.dataBounds[2*tl[v][0]+1],d++,u[3*f]=2,u[3*f+1]=d-2,u[3*f+2]=d-1,f++}}t.polyData.getPoints().setData(c,3),t.polyData.getPoints().modified(),t.polyData.getLines().setData(u,1),t.polyData.getLines().modified(),t.polyData.modified()},e.updateTextData=function(e,r,a,n){for(var o=0,i=0;i<12;i++)1===r[i]&&(o+=2+a[ts[i]].length);for(var s=t.polyData.getPoints().getData(),l=new Float64Array(3*o),c=0,u=0,d=0,f=0;f<6;f++)if(e[f])for(var g=0;g<4;g++){var p=to[f][g];if(1===r[p]){var m=ts[p],h=3*ti[p][0],v=3*ti[p][1];l[3*c]=.5*(s[h]+s[v]),l[3*c+1]=.5*(s[h+1]+s[v+1]),l[3*c+2]=.5*(s[h+2]+s[v+2]);var b=Math.floor(f/2);l[3*++c+b]=t.dataBounds[f],l[3*c+tl[f][0]]=.5*(t.dataBounds[2*tl[f][0]]+t.dataBounds[2*tl[f][0]+1]),l[3*c+tl[f][1]]=.5*(t.dataBounds[2*tl[f][1]]+t.dataBounds[2*tl[f][1]+1]),c++,t.textValues[u]=t.axisLabels[m],u++;var y=(m+1)%3,x=(m+2)%3,T=a[m],P=n[m];t.tickCounts[d]=T.length;for(var S=0;S<T.length;S++)l[3*c+m]=T[S],l[3*c+y]=s[h+y],l[3*c+x]=s[h+x],c++,t.textValues[u]=P[S],u++;d++}}t.textPolyData.getPoints().setData(l,3),t.textPolyData.modified()},e.update=function(){if(t.camera){for(var r=e.computeFacesToDraw(),a=t.lastFacesToDraw,n=!1,o=0;o<6;o++)t.dataBounds[o]!==t.lastTickBounds[o]&&(n=!0,t.lastTickBounds[o]=t.dataBounds[o]);if(r||n||t.forceUpdate){for(var i=Array(12).fill(0),s=0;s<6;s++)if(a[s])for(var l=0;l<4;l++)i[to[s][l]]++;for(var c=[],u=[],d=0;d<3;d++){var f=e1().domain([t.dataBounds[2*d],t.dataBounds[2*d+1]]);c[d]=f.ticks(5);var g=f.tickFormat(5);u[d]=c[d].map(g)}e.updatePolyData(a,i,c),e.updateTextData(a,i,c,u),(n||t.forceUpdate)&&e.updateTextureAtlas(u)}t.forceUpdate=!1}},e.updateTextureAtlas=function(e){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t._tmAtlas.clear();for(var r=0,a=1,n=0;n<3;n++){if(!t._tmAtlas.has(t.axisLabels[n])){th(t.tmContext,t.axisTextStyle);var o=t.tmContext.measureText(t.axisLabels[n]),i={height:o.actualBoundingBoxAscent+2,startingHeight:a,width:o.width+2,textStyle:t.axisTextStyle};t._tmAtlas.set(t.axisLabels[n],i),a+=i.height,r<i.width&&(r=i.width)}th(t.tmContext,t.tickTextStyle);for(var s=0;s<e[n].length;s++)if(!t._tmAtlas.has(e[n][s])){var l=t.tmContext.measureText(e[n][s]),c={height:l.actualBoundingBoxAscent+2,startingHeight:a,width:l.width+2,textStyle:t.tickTextStyle};t._tmAtlas.set(e[n][s],c),a+=c.height,r<c.width&&(r=c.width)}}r=(0,e2.M)(r),a=(0,e2.M)(a),t._tmAtlas.forEach(function(e){e.tcoords=[0,(a-e.startingHeight-e.height)/a,e.width/r,(a-e.startingHeight-e.height)/a,e.width/r,(a-e.startingHeight)/a,0,(a-e.startingHeight)/a]}),t.tmCanvas.width=r,t.tmCanvas.height=a,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,r,a),t._tmAtlas.forEach(function(e,r){th(t.tmContext,e.textStyle),t.tmContext.fillText(r,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified()},e.onModified(function(){t.forceUpdate=!0,e.update()}),e.setTickTextStyle=function(r){t.tickTextStyle=ta(ta({},t.tickTextStyle),r),e.modified()},e.setAxisTextStyle=function(r){t.axisTextStyle=ta(ta({},t.axisTextStyle),r),e.modified()},e.get_tmAtlas=function(){return t._tmAtlas},e.getBounds=function(){return e.update(),e4.ZP.setBounds(t.bounds,t.gridActor.getBounds()),e4.ZP.scaleAboutCenter(t.bounds,t.boundsScaleFactor,t.boundsScaleFactor,t.boundsScaleFactor),t.bounds},r=R.default.chain(e.setProperty,t.gridActor.setProperty),e.setProperty=function(e){return r(e)[0]}}var ty={newInstance:R.default.newInstance(tb,"vtkCubeAxesActor"),extend:tb,newCubeAxesActorHelper:tv},tx=r(87308),tT=r(50326),tP={},tS=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tP,r),tx.Z.extend(e,t,r),t.CubeAxesActorHelper=ty.newCubeAxesActorHelper(),t.classHierarchy.push("vtkOpenGLCubeAxesActor"),e.buildPass=function(r){r&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var a=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,n=t._openGLRenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([n.usize,n.vsize],a,t._openGLRenderWindow.getRenderable())}}},"vtkOpenGLCubeAxesActor");(0,tT.vw)("vtkCubeAxesActor",tS),r(18826);var tC=r(48692),tO=r(56961),tA=r(4333),tw=r(75165),tD=tw.ZP.ColorMode,tM=tw.ZP.ScalarMode,tB=tw.ZP.GetArray,tI={static:!1,lookupTable:null,scalarVisibility:!1,scalarRange:[0,1],useLookupTableScalarRange:!1,colorMode:0,scalarMode:0,arrayAccessMode:1,renderTime:0,colorByArrayName:null,transformCoordinate:null,viewSpecificProperties:null,customShaderAttributes:[]};function tV(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tI,r),tO.Z.extend(e,t,r),R.default.get(e,t,["colorMapColors"]),R.default.setGet(e,t,["arrayAccessMode","colorByArrayName","colorMode","lookupTable","renderTime","scalarMode","scalarVisibility","static","transformCoordinate","useLookupTableScalarRange","viewSpecificProperties","customShaderAttributes"]),R.default.setGetArray(e,t,["scalarRange"],2),t.viewSpecificProperties||(t.viewSpecificProperties={}),t.classHierarchy.push("vtkMapper2D"),e.createDefaultLookupTable=function(){t.lookupTable=tA.ZP.newInstance()},e.getColorModeAsString=function(){return R.default.enumToString(tD,t.colorMode)},e.setColorModeToDefault=function(){return e.setColorMode(0)},e.setColorModeToMapScalars=function(){return e.setColorMode(1)},e.setColorModeToDirectScalars=function(){return e.setColorMode(2)},e.getScalarModeAsString=function(){return R.default.enumToString(tM,t.scalarMode)},e.setScalarModeToDefault=function(){return e.setScalarMode(0)},e.setScalarModeToUsePointData=function(){return e.setScalarMode(1)},e.setScalarModeToUseCellData=function(){return e.setScalarMode(2)},e.setScalarModeToUsePointFieldData=function(){return e.setScalarMode(3)},e.setScalarModeToUseCellFieldData=function(){return e.setScalarMode(4)},e.setScalarModeToUseFieldData=function(){return e.setScalarMode(5)},e.getAbstractScalars=function(e,r,a,n,o){if(!e||!t.scalarVisibility)return{scalars:null,cellFLag:!1};var i=null,s=!1;if(r===tM.DEFAULT)(i=e.getPointData().getScalars())||(i=e.getCellData().getScalars(),s=!0);else if(r===tM.USE_POINT_DATA)i=e.getPointData().getScalars();else if(r===tM.USE_CELL_DATA)i=e.getCellData().getScalars(),s=!0;else if(r===tM.USE_POINT_FIELD_DATA){var l=e.getPointData();i=a===tB.BY_ID?l.getArrayByIndex(n):l.getArrayByName(o)}else if(r===tM.USE_CELL_FIELD_DATA){var c=e.getCellData();s=!0,i=a===tB.BY_ID?c.getArrayByIndex(n):c.getArrayByName(o)}else if(r===tM.USE_FIELD_DATA){var u=e.getFieldData();i=a===tB.BY_ID?u.getArrayByIndex(n):u.getArrayByName(o)}return{scalars:i,cellFlag:s}},e.getLookupTable=function(){return t.lookupTable||e.createDefaultLookupTable(),t.lookupTable},e.getMTime=function(){var e=t.mtime;if(null!==t.lookupTable){var r=t.lookupTable.getMTime();e=r>e?r:e}return e},e.mapScalars=function(r,a){var n=e.getAbstractScalars(r,t.scalarMode,t.arrayAccessMode,t.arrayId,t.colorByArrayName).scalars;if(!n){t.colorMapColors=null;return}var o="".concat(e.getMTime()).concat(n.getMTime()).concat(a);if(t.colorBuildString!==o){t.useLookupTableScalarRange||e.getLookupTable().setRange(t.scalarRange[0],t.scalarRange[1]);var i=e.getLookupTable();i&&(i.build(),t.colorMapColors=i.mapScalars(n,t.colorMode,t.fieldDataTupleId)),t.colorBuildString="".concat(e.getMTime()).concat(n.getMTime()).concat(a)}}}var tk=R.default.newInstance(tV,"vtkMapper2D"),tL=r(62362),tR=r(17794),tN=r(58419),tU={BACKGROUND:0,FOREGROUND:1},tE={DisplayLocation:tU},tG=tC.ZP.primTypes,tF={newInstance:tk,extend:tV}.ScalarMode,tz=R.E0,tW={type:"StartEvent"},tZ={type:"EndEvent"},t_={context:null,VBOBuildTime:0,VBOBuildString:null,primitives:null,primTypes:null,shaderRebuildString:null},tH=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,t_,r),tx.Z.extend(e,t,r),tR.Z.implementReplaceShaderCoincidentOffset(e,t,r),tR.Z.implementBuildShadersWithReplacements(e,t,r),t.primitives=[],t.primTypes=tG,t.tmpMat4=G.identity(new Float64Array(16));for(var a=tG.Start;a<tG.End;a++)t.primitives[a]=tC.ZP.newInstance(),t.primitives[a].setPrimitiveType(a),t.primitives[a].set({lastLightComplexity:0,lastLightCount:0,lastSelectionPass:!1},!0);(0,R.g2)(e,t,["context"]),t.VBOBuildTime={},(0,R.j6)(t.VBOBuildTime,{mtime:0}),t.classHierarchy.push("vtkOpenGLPolyDataMapper2D"),e.buildPass=function(r){r&&(t.openGLActor2D=e.getFirstAncestorOfType("vtkOpenGLActor2D"),t._openGLRenderer=t.openGLActor2D.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.openGLCamera=t._openGLRenderer.getViewNodeFor(t._openGLRenderer.getRenderable().getActiveCamera()))},e.overlayPass=function(t){t&&e.render()},e.getShaderTemplate=function(e,t,r){e.Vertex="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DVS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\n// all variables that represent positions or directions have a suffix\n// indicating the coordinate system they are in. The possible values are\n// MC - Model Coordinates\n// WC - WC world coordinates\n// VC - View Coordinates\n// DC - Display Coordinates\n\nin vec4 vertexWC;\n\n// frag position in VC\n//VTK::PositionVC::Dec\n\n// material property values\n//VTK::Color::Dec\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nuniform mat4 WCVCMatrix;  // World to view matrix\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  gl_Position = WCVCMatrix*vertexWC;\n\n  //VTK::TCoord::Impl\n\n  //VTK::Color::Impl\n\n  //VTK::PositionVC::Impl\n}\n",e.Fragment="//VTK::System::Dec\n\n/*=========================================================================\n\n  Program:   Visualization Toolkit\n  Module:    vtkPolyData2DFS.glsl\n\n  Copyright (c) Ken Martin, Will Schroeder, Bill Lorensen\n  All rights reserved.\n  See Copyright.txt or http://www.kitware.com/Copyright.htm for details.\n\n     This software is distributed WITHOUT ANY WARRANTY; without even\n     the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR\n     PURPOSE.  See the above copyright notice for more information.\n\n=========================================================================*/\n\nuniform int PrimitiveIDOffset;\n\n// Texture coordinates\n//VTK::TCoord::Dec\n\n// Scalar coloring\n//VTK::Color::Dec\n\n// Depth Peeling\n//VTK::DepthPeeling::Dec\n\n// picking support\n//VTK::Picking::Dec\n\n// the output of this shader\n//VTK::Output::Dec\n\n// Apple Bug\n//VTK::PrimID::Dec\n\nvoid main()\n{\n  // Apple Bug\n  //VTK::PrimID::Impl\n\n  //VTK::Color::Impl\n  //VTK::TCoord::Impl\n\n  //VTK::DepthPeeling::Impl\n  //VTK::Picking::Impl\n\n  if (gl_FragData[0].a <= 0.0)\n    {\n    discard;\n    }\n}\n",e.Geometry=""},e.render=function(){var r=t._openGLRenderWindow.getContext();if(t.context!==r){t.context=r;for(var a=tG.Start;a<tG.End;a++)t.primitives[a].setOpenGLRenderWindow(t._openGLRenderWindow)}var n=t.openGLActor2D.getRenderable(),o=t._openGLRenderer.getRenderable();e.renderPiece(o,n)},e.renderPiece=function(r,a){if(e.invokeEvent(tW),t.renderable.getStatic()||t.renderable.update(),t.currentInput=t.renderable.getInputData(),e.invokeEvent(tZ),!t.currentInput){tz("No input!");return}t.currentInput.getPoints&&t.currentInput.getPoints().getNumberOfValues()&&(e.renderPieceStart(r,a),e.renderPieceDraw(r,a),e.renderPieceFinish(r,a))},e.renderPieceStart=function(r,a){t.primitiveIDOffset=0,t._openGLRenderer.getSelector()&&(t._openGLRenderer.getSelector().getCurrentPass(),t._openGLRenderer.getSelector().renderProp(a)),e.updateBufferObjects(r,a),t.lastBoundBO=null},e.getNeedToRebuildShaders=function(e,r,a){return!!(e.getShaderSourceTime().getMTime()<t.renderable.getMTime()||e.getShaderSourceTime().getMTime()<t.currentInput.getMTime())},e.updateBufferObjects=function(t,r){e.getNeedToRebuildBufferObjects(t,r)&&e.buildBufferObjects(t,r)},e.getNeedToRebuildBufferObjects=function(r,a){var n=t.VBOBuildTime.getMTime();return!!(n<e.getMTime()||n<t._openGLRenderWindow.getMTime()||n<t.renderable.getMTime()||n<a.getMTime()||n<t.currentInput.getMTime()||t.renderable.getTransformCoordinate()&&n<r.getMTime())},e.buildBufferObjects=function(e,r){var a=t.currentInput;if(null!==a){t.renderable.mapScalars(a,r.getProperty().getOpacity());var n=t.renderable.getColorMapColors();t.haveCellScalars=!1;var o=t.renderable.getScalarMode();t.renderable.getScalarVisibility()&&(o===tF.USE_CELL_DATA||o===tF.USE_CELL_FIELD_DATA||o===tF.USE_FIELD_DATA||!a.getPointData().getScalars())&&o!==tF.USE_POINT_FIELD_DATA&&n&&(t.haveCellScalars=!0);var i=r.getProperty().getRepresentation(),s=a.getPointData().getTCoords();t.openGLActor2D.getActiveTextures()||(s=null);var l=t.renderable.getTransformCoordinate(),c=e.getRenderWindow().getViews()[0].getViewportSize(e),u="".concat(a.getMTime(),"A").concat(i,"B").concat(a.getMTime())+"C".concat(n?n.getMTime():1)+"D".concat(s?s.getMTime():1)+"E".concat(l?e.getMTime():1)+"F".concat(c);if(t.VBOBuildString!==u){var d=a.getPoints();if(l){var f=tL.ZP.newInstance(),g=d.getNumberOfPoints();f.setNumberOfPoints(g);for(var p=[],m=0;m<g;++m){d.getPoint(m,p),l.setValue(p);var h=l.getComputedDoubleViewportValue(e);f.setPoint(m,h[0],h[1],0)}d=f}var v={points:d,tcoords:s,colors:n,cellOffset:0,haveCellScalars:t.haveCellSCalars,customAttributes:t.renderable.getCustomShaderAttributes().map(function(e){return a.getPointData().getArrayByName(e)})};v.cellOffset+=t.primitives[tG.Points].getCABO().createVBO(a.getVerts(),"verts",i,v),v.cellOffset+=t.primitives[tG.Lines].getCABO().createVBO(a.getLines(),"lines",i,v),v.cellOffset+=t.primitives[tG.Tris].getCABO().createVBO(a.getPolys(),"polys",i,v),v.cellOffset+=t.primitives[tG.TriStrips].getCABO().createVBO(a.getStrips(),"strips",i,v),t.VBOBuildTime.modified(),t.VBOBuildString=u}}},e.renderPieceDraw=function(r,a){var n=a.getProperty().getRepresentation();t.context.depthMask(!0);for(var o=tG.Start;o<tG.End;o++)t.primitives[o].getCABO().getElementCount()&&(t.lastBoundBO=t.primitives[o],t.primitiveIDOffset+=t.primitives[o].drawArrays(r,a,n,e))},e.renderPieceFinish=function(e,r){t.lastBoundBO&&t.lastBoundBO.getVAO().release()},e.replaceShaderValues=function(t,r,a){e.replaceShaderColor(t,r,a),e.replaceShaderTCoord(t,r,a),e.replaceShaderPicking(t,r,a),e.replaceShaderPositionVC(t,r,a)},e.replaceShaderColor=function(e,r,a){var n=e.Vertex,o=e.Geometry,i=e.Fragment;t.haveCellScalars&&(i=tN.Z.substitute(i,"//VTK::Color::Dec",["uniform samplerBuffer texture1;"]).result,i=tN.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = texelFetchBuffer(texture1, gl_PrimitiveID + PrimitiveIDOffset);"]).result),0!==t.lastBoundBO.getCABO().getColorComponents()?(n=tN.Z.substitute(n,"//VTK::Color::Dec",["in vec4 diffuseColor;","out vec4 fcolorVSOutput;"]).result,n=tN.Z.substitute(n,"//VTK::Color::Impl",["fcolorVSOutput = diffuseColor;"]).result,o=tN.Z.substitute(o,"//VTK::Color::Dec",["in vec4 fcolorVSOutput[];\n","out vec4 fcolorGSOutput;"]).result,o=tN.Z.substitute(o,"//VTK::Color::Impl",["fcolorGSOutput = fcolorVSOutput[i];"]).result,i=tN.Z.substitute(i,"//VTK::Color::Dec",["in vec4 fcolorVSOutput;"]).result,i=tN.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = fcolorVSOutput;"]).result):(i=tN.Z.substitute(i,"//VTK::Color::Dec",["uniform vec4 diffuseColor;"]).result,i=tN.Z.substitute(i,"//VTK::Color::Impl",["gl_FragData[0] = diffuseColor;"]).result),e.Vertex=n,e.Geometry=o,e.Fragment=i},e.replaceShaderTCoord=function(e,r,a){if(t.lastBoundBO.getCABO().getTCoordOffset()){var n=e.Vertex,o=e.Geometry,i=e.Fragment,s=t.lastBoundBO.getCABO().getTCoordComponents();1===s?(n=tN.Z.substitute(n,"//VTK::TCoord::Dec",["in float tcoordMC;","out float tcoordVCVSOutput;"]).result,n=tN.Z.substitute(n,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=tN.Z.substitute(o,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput[];\n","out float tcoordVCGSOutput;"]).result,o=tN.Z.substitute(o,["//VTK::TCoord::Impl","tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=tN.Z.substitute(i,"//VTK::TCoord::Dec",["in float tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=tN.Z.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, vec2(tcoordVCVSOutput,0));"]).result):2===s&&(n=tN.Z.substitute(n,"//VTK::TCoord::Dec",["in vec2 tcoordMC;","out vec2 tcoordVCVSOutput;"]).result,n=tN.Z.substitute(n,"//VTK::TCoord::Impl",["tcoordVCVSOutput = tcoordMC;"]).result,o=tN.Z.substitute(o,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput[];\n","out vec2 tcoordVCGSOutput;"]).result,o=tN.Z.substitute(o,"//VTK::TCoord::Impl",["tcoordVCGSOutput = tcoordVCVSOutput[i];"]).result,i=tN.Z.substitute(i,"//VTK::TCoord::Dec",["in vec2 tcoordVCVSOutput;","uniform sampler2D texture1;"]).result,i=tN.Z.substitute(i,"//VTK::TCoord::Impl",["gl_FragData[0] = gl_FragData[0]*texture2D(texture1, tcoordVCVSOutput.st);"]).result),t.haveCellScalars&&(o=tN.Z.substitute(o,"//VTK::PrimID::Impl",["gl_PrimitiveID = gl_PrimitiveIDIn;"]).result),e.Vertex=n,e.Geometry=o,e.Fragment=i}},e.replaceShaderPicking=function(e,t,r){var a=e.Fragment;a=tN.Z.substitute(a,"//VTK::Picking::Dec",["uniform vec3 mapperIndex;","uniform int picking;"]).result,a=tN.Z.substitute(a,"//VTK::Picking::Impl","  gl_FragData[0] = picking != 0 ? vec4(mapperIndex,1.0) : gl_FragData[0];").result,e.Fragment=a},e.replaceShaderPositionVC=function(e,r,a){t.lastBoundBO.replaceShaderPositionVC(e,r,a)},e.invokeShaderCallbacks=function(e,r,a){var n=t.renderable.getViewSpecificProperties().ShadersCallbacks;n&&n.forEach(function(t){t.callback(t.userData,e,r,a)})},e.setMapperShaderParameters=function(e,r,a){if(e.getProgram().isUniformUsed("PrimitiveIDOffset")&&e.getProgram().setUniformi("PrimitiveIDOffset",t.primitiveIDOffset),e.getProgram().isAttributeUsed("vertexWC")&&!e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"vertexWC",e.getCABO().getVertexOffset(),e.getCABO().getStride(),t.context.FLOAT,3,!1)&&tz("Error setting vertexWC in shader VAO."),e.getCABO().getElementCount()&&(t.VBOBuildTime.getMTime()>e.getAttributeUpdateTime().getMTime()||e.getShaderSourceTime().getMTime()>e.getAttributeUpdateTime().getMTime())){t.renderable.getCustomShaderAttributes().forEach(function(r,a){e.getProgram().isAttributeUsed("".concat(r,"MC"))&&!e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"".concat(r,"MC"),e.getCABO().getCustomData()[a].offset,e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getCustomData()[a].components,!1)&&tz("Error setting ".concat(r,"MC in shader VAO."))}),e.getProgram().isAttributeUsed("tcoordMC")&&e.getCABO().getTCoordOffset()?e.getVAO().addAttributeArray(e.getProgram(),e.getCABO(),"tcoordMC",e.getCABO().getTCoordOffset(),e.getCABO().getStride(),t.context.FLOAT,e.getCABO().getTCoordComponents(),!1)||tz("Error setting tcoordMC in shader VAO."):e.getVAO().removeAttributeArray("tcoordMC"),t.internalColorTexture&&e.getProgram().isUniformUsed("texture1")&&e.getProgram().setUniformi("texture1",t.internalColorTexture.getTextureUnit());var n=t.openGLActor2D.getActiveTextures();if(n)for(var o=0;o<n.length;++o){var i=n[o].getTextureUnit(),s="texture".concat(i+1);e.getProgram().isUniformUsed(s)&&e.getProgram().setUniformi(s,i)}e.setMapperShaderParameters(r,a,t._openGLRenderer.getTiledSizeAndOrigin());var l=t._openGLRenderer.getSelector();e.getProgram().setUniform3fArray("mapperIndex",l?l.getPropColorValue():[0,0,0]),e.getProgram().setUniformi("picking",l?l.getCurrentPass()+1:0)}},e.setPropertyShaderParameters=function(e,r,a){var n=t.renderable.getColorMapColors();if(!n||0===n.getNumberOfComponents()){var o=e.getProgram(),i=a.getProperty(),s=i.getOpacity(),l=i.getColor(),c=[l[0],l[1],l[2],s];o.setUniform4f("diffuseColor",c)}},e.setLightingShaderParameters=function(e,t,r){},e.setCameraShaderParameters=function(e,r,a){var n,o,i=e.getProgram(),s=e.getCABO().getCoordShiftAndScaleEnabled()?e.getCABO().getInverseShiftAndScaleMatrix():null,l=r.getRenderWindow().getViews()[0].getViewportSize(r),c=r.getViewport(),u=a.getActualPositionCoordinate().getComputedDoubleViewportValue(r),d=[0,0,1,1];if(d[0]=c[0]>=0?c[0]:0,d[1]=c[1]>=0?c[1]:0,d[2]=c[2]<=1?c[2]:1,d[3]=c[3]<=1?c[3]:1,!(d[0]>=d[2])&&!(d[1]>=d[3])){l[0]=(0,e2.K)(l[0]*(d[2]-d[0])/(c[2]-c[0])),l[1]=(0,e2.K)(l[1]*(d[3]-d[1])/(c[3]-c[1]));var f=t._openGLRenderer.getParent().getSize(),g=(0,e2.K)(u[0]-(d[0]-c[0])*f[0]),p=(0,e2.K)(u[1]-(d[1]-c[1])*f[1]),m=-g,h=-g+l[0],v=-p,b=-p+l[1];m===h&&(h=m+1),v===b&&(b=v+1);var y=G.identity(new Float64Array(16));y[0]=2/(h-m),y[5]=2/(b-v),y[3]=-1*(h+m)/(h-m),y[7]=-1*(b+v)/(b-v),y[10]=0,y[11]=a.getProperty().getDisplayLocation()===tU.FOREGROUND?-1:1,y[15]=1,G.transpose(y,y),i.setUniformMatrix("WCVCMatrix",(n=[y,s],o=t.tmpMat4,G.identity(o),n.reduce(function(e,t,r){return 0===r?t?G.copy(e,t):G.identity(e):t?G.multiply(e,e,t):e},o)))}}},"vtkOpenGLPolyDataMapper2D");function tj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function tK(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tj(Object(r),!0).forEach(function(t){(0,U.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tj(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}(0,tT.vw)("vtkMapper2D",tH);var t$=r(15817).ZP.VectorMode;function tq(e,t){e.strokeStyle=t.strokeColor,e.lineWidth=t.strokeSize,e.fillStyle=t.fontColor,e.font="".concat(t.fontStyle," ").concat(t.fontSize,"px ").concat(t.fontFamily)}function tX(e,t){return function(e){var r=e.getLastSize(),a=Math.pow(r[0]/700,.8),n=Math.pow(r[1]/700,.8),o=Math.min(a,n),i=e.getAxisTextStyle(),s=e.getTickTextStyle();Object.assign(i,t.axisTextStyle),Object.assign(s,t.tickTextStyle),i.fontSize=Math.max(24*o,12),e.getLastAspectRatio()>1?s.fontSize=Math.max(20*o,10):s.fontSize=Math.max(16*o,10);var l=e.updateTextureAtlas();e.setTopTitle(!1);var c=e.getBoxSizeByReference();if(e.getLastAspectRatio()>1)e.setTickLabelPixelOffset(.3*s.fontSize),l.titleWidth<=l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize?(e.setTopTitle(!0),e.setAxisTitlePixelOffset(.2*s.fontSize),c[0]=2*(l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize)/r[0],e.setBoxPosition([.98-c[0],-.92])):(e.setAxisTitlePixelOffset(.2*s.fontSize),c[0]=2*(l.titleHeight+e.getAxisTitlePixelOffset()+l.tickWidth+e.getTickLabelPixelOffset()+.8*s.fontSize)/r[0],e.setBoxPosition([.99-c[0],-.92])),c[1]=Math.max(1.2,Math.min(1.84/n,1.84));else{e.setAxisTitlePixelOffset(1.2*s.fontSize),e.setTickLabelPixelOffset(.1*s.fontSize);var u=2*(.8*s.fontSize+l.titleHeight+e.getAxisTitlePixelOffset())/r[1],d=2*l.tickWidth/r[0];c[0]=Math.min(1.9,Math.max(1.4,1.4*d*(e.getTicks().length+3))),c[1]=u,e.setBoxPosition([-.5*c[0],-.97])}e.recomputeBarSegments(l)}}function tY(e,t){return function(e){var t=e.getLastTickBounds(),r=e1().domain([t[0],t[1]]),a=r.ticks(5),n=r.tickFormat(5);e.setTicks(a),e.setTickStrings(a.map(n))}}var tJ=R.default.newInstance(function(e,t){var r,a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{renderable:null};Object.assign(t,{},n),R.default.obj(e,t),R.default.setGet(e,t,["axisTitlePixelOffset","tickLabelPixelOffset","renderable","topTitle","ticks","tickStrings"]),R.default.get(e,t,["lastSize","lastAspectRatio","lastTickBounds","axisTextStyle","tickTextStyle","barActor","tmActor"]),R.default.getArray(e,t,["boxPosition","boxSize"]),R.default.setArray(e,t,["boxPosition","boxSize"],2),t.forceUpdate=!1,t.lastRebuildTime={},R.default.obj(t.lastRebuildTime,{mtime:0}),t.lastSize=[-1,-1],t.tmCanvas=document.createElement("canvas"),t.tmContext=t.tmCanvas.getContext("2d"),t._tmAtlas=new Map,t.barMapper=e6.ZP.newInstance(),t.barMapper.setInterpolateScalarsBeforeMapping(!0),t.barMapper.setUseLookupTableScalarRange(!0),t.polyData=e8.ZP.newInstance(),t.barMapper.setInputData(t.polyData),t.barActor=e3.ZP.newInstance(),t.barActor.setMapper(t.barMapper),t.tmPolyData=e8.ZP.newInstance(),t.tmMapper=e6.ZP.newInstance(),t.tmMapper.setInputData(t.tmPolyData),t.tmTexture=tt.newInstance({resizable:!0}),t.tmTexture.setInterpolate(!1),t.tmActor=e3.ZP.newInstance({parentProp:e}),t.tmActor.setMapper(t.tmMapper),t.tmActor.addTexture(t.tmTexture),t.barPosition=[0,0],t.barSize=[0,0],t.boxPosition=[.88,-.92],t.boxSize=[.1,1.1],t.lastTickBounds=[],t.classHierarchy.push("vtkScalarBarActorHelper"),e.setRenderable=function(r){t.renderable!==r&&(t.renderable=r,t.barActor.setProperty(r.getProperty()),t.barActor.setParentProp(r),t.barActor.setCoordinateSystemToDisplay(),t.tmActor.setProperty(r.getProperty()),t.tmActor.setParentProp(r),t.tmActor.setCoordinateSystemToDisplay(),t.generateTicks=r.generateTicks,t.axisTextStyle=tK({},r.getAxisTextStyle()),t.tickTextStyle=tK({},r.getTickTextStyle()),e.modified())},e.updateAPISpecificData=function(r,a,n){(t.lastSize[0]!==r[0]||t.lastSize[1]!==r[1])&&(t.lastSize[0]=r[0],t.lastSize[1]=r[1],t.lastAspectRatio=r[0]/r[1],t.forceUpdate=!0);var o=t.renderable.getScalarsToColors();if(o&&t.renderable.getVisibility()&&(t.barMapper.setLookupTable(o),t.camera=a,t.renderWindow=n,t.forceUpdate||Math.max(o.getMTime(),e.getMTime(),t.renderable.getMTime())>t.lastRebuildTime.getMTime())){var i=o.getMappingRange();if(t.lastTickBounds=(0,N.Z)(i),t.renderable.getGenerateTicks()(e),t.renderable.getAutomated())t.renderable.getAutoLayout()(e);else{t.axisTextStyle=tK({},t.renderable.getAxisTextStyle()),t.tickTextStyle=tK({},t.renderable.getTickTextStyle()),t.barPosition=(0,N.Z)(t.renderable.getBarPosition()),t.barSize=(0,N.Z)(t.renderable.getBarSize()),t.boxPosition=(0,N.Z)(t.renderable.getBoxPosition()),t.boxSize=(0,N.Z)(t.renderable.getBoxSize()),t.axisTitlePixelOffset=t.renderable.getAxisTitlePixelOffset(),t.tickLabelPixelOffset=t.renderable.getTickLabelPixelOffset();var s=e.updateTextureAtlas();e.recomputeBarSegments(s)}e.updatePolyDataForLabels(),e.updatePolyDataForBarSegments(),t.lastRebuildTime.modified(),t.forceUpdate=!1}},e.updateTextureAtlas=function(){t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left";var r={},a=new Map,n=0,o=1;tq(t.tmContext,t.axisTextStyle);var i=t.tmContext.measureText(t.renderable.getAxisLabel()),s={height:i.actualBoundingBoxAscent+2,startingHeight:o,width:i.width+2,textStyle:t.axisTextStyle};a.set(t.renderable.getAxisLabel(),s),o+=s.height,n=s.width,r.titleWidth=s.width,r.titleHeight=s.height,r.tickWidth=0,r.tickHeight=0,tq(t.tmContext,t.tickTextStyle);for(var l=[].concat((0,N.Z)(e.getTickStrings()),["NaN","Below","Above"]),c=0;c<l.length;c++)!a.has(l[c])&&(s={height:(i=t.tmContext.measureText(l[c])).actualBoundingBoxAscent+2,startingHeight:o,width:i.width+2,textStyle:t.tickTextStyle},a.set(l[c],s),o+=s.height,n<s.width&&(n=s.width),r.tickWidth<s.width&&(r.tickWidth=s.width),r.tickHeight<s.height&&(r.tickHeight=s.height));return n=(0,e2.M)(n),o=(0,e2.M)(o),a.forEach(function(e){e.tcoords=[0,(o-e.startingHeight-e.height)/o,e.width/n,(o-e.startingHeight-e.height)/o,e.width/n,(o-e.startingHeight)/o,0,(o-e.startingHeight)/o]}),t.tmCanvas.width=n,t.tmCanvas.height=o,t.tmContext.textBaseline="bottom",t.tmContext.textAlign="left",t.tmContext.clearRect(0,0,n,o),a.forEach(function(e,r){tq(t.tmContext,e.textStyle),t.tmContext.fillText(r,1,e.startingHeight+e.height-1)}),t.tmTexture.setCanvas(t.tmCanvas),t.tmTexture.modified(),t._tmAtlas=a,r},e.computeBarSize=function(e){t.vertical=t.boxSize[1]>t.boxSize[0];var r=2*e.tickHeight/t.lastSize[1],a=[1,1];if(t.vertical){var n=2*(e.tickWidth+t.tickLabelPixelOffset)/t.lastSize[0];if(t.topTitle){var o=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0]-n,t.barSize[1]=t.boxSize[1]-o}else{var i=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[0];t.barSize[0]=t.boxSize[0]-i-n,t.barSize[1]=t.boxSize[1]}t.barPosition[0]=t.boxPosition[0]+n,t.barPosition[1]=t.boxPosition[1],a[1]=r}else{var s=(2*e.tickWidth-8)/t.lastSize[0],l=2*(e.titleHeight+t.axisTitlePixelOffset)/t.lastSize[1];t.barSize[0]=t.boxSize[0],t.barPosition[0]=t.boxPosition[0],t.barSize[1]=t.boxSize[1]-l,t.barPosition[1]=t.boxPosition[1],a[0]=s}return a},e.recomputeBarSegments=function(r){var a,n,o,i,s=e.computeBarSize(r);t.barSegments=[];var l=[0,0],c=t.vertical?1:0,u=t.vertical?.01:.02;function d(e,r){t.barSegments.push({corners:[[].concat(l),[l[0]+s[0],l[1]],[l[0]+s[0],l[1]+s[1]],[l[0],l[1]+s[1]]],scalars:r,title:e}),l[c]+=s[c]+u}t.renderable.getDrawNanAnnotation()&&t.renderable.getScalarsToColors().getNanColor()&&d("NaN",[NaN,NaN,NaN,NaN]),t.renderable.getDrawBelowRangeSwatch()&&null!==(a=(n=t.renderable.getScalarsToColors()).getUseBelowRangeColor)&&void 0!==a&&a.call(n)&&d("Below",[-.1,-.1,-.1,-.1]);var f=null===(o=(i=t.renderable.getScalarsToColors()).getUseAboveRangeColor)||void 0===o?void 0:o.call(i);l[c]+=u;var g=s[c];s[c]=f?1-2*u-s[c]-l[c]:1-u-l[c],d("ticks",t.vertical?[0,0,.995,.995]:[0,.995,.995,0]),t.renderable.getDrawAboveRangeSwatch()&&f&&(s[c]=g,l[c]+=u,d("Above",[1.1,1.1,1.1,1.1]))},r=new Float64Array(3),e.createPolyDataForOneLabel=function(e,a,n,o,i,s){var l=t._tmAtlas.get(e);if(l){var c=s.ptIdx,u=s.cellIdx;r[0]=(.5*a[0]+.5)*t.lastSize[0],r[1]=(.5*a[1]+.5)*t.lastSize[1],r[2]=a[2],r[0]+=i[0],r[1]+=i[1];var d=[],f="vertical"===o?[1,0]:[0,1];"vertical"===o?(d[0]=l.width,d[1]=-l.height,"middle"===n[0]?r[1]-=l.width/2:"right"===n[0]&&(r[1]-=l.width),"middle"===n[1]?r[0]+=l.height/2:"top"===n[1]&&(r[0]+=l.height)):(d[0]=l.width,d[1]=l.height,"middle"===n[0]?r[0]-=l.width/2:"right"===n[0]&&(r[0]-=l.width),"middle"===n[1]?r[1]-=l.height/2:"top"===n[1]&&(r[1]-=l.height)),s.points[3*c]=r[0],s.points[3*c+1]=r[1],s.points[3*c+2]=r[2],s.tcoords[2*c]=l.tcoords[0],s.tcoords[2*c+1]=l.tcoords[1],c++,r[f[0]]+=d[0],s.points[3*c]=r[0],s.points[3*c+1]=r[1],s.points[3*c+2]=r[2],s.tcoords[2*c]=l.tcoords[2],s.tcoords[2*c+1]=l.tcoords[3],c++,r[f[1]]+=d[1],s.points[3*c]=r[0],s.points[3*c+1]=r[1],s.points[3*c+2]=r[2],s.tcoords[2*c]=l.tcoords[4],s.tcoords[2*c+1]=l.tcoords[5],c++,r[f[0]]-=d[0],s.points[3*c]=r[0],s.points[3*c+1]=r[1],s.points[3*c+2]=r[2],s.tcoords[2*c]=l.tcoords[6],s.tcoords[2*c+1]=l.tcoords[7],c++,s.polys[4*u]=3,s.polys[4*u+1]=c-4,s.polys[4*u+2]=c-3,s.polys[4*u+3]=c-2,u++,s.polys[4*u]=3,s.polys[4*u+1]=c-4,s.polys[4*u+2]=c-2,s.polys[4*u+3]=c-1,s.ptIdx+=4,s.cellIdx+=2}},a=new Float64Array(3),e.updatePolyDataForLabels=function(){var r=e.getTickStrings().length+t.barSegments.length,n=4*r,o=new Float64Array(3*n),i=new Uint16Array(4*(2*r)),s=new Float32Array(2*n),l={ptIdx:0,cellIdx:0,polys:i,points:o,tcoords:s},c=t.vertical?0:1,u=t.vertical?1:0;a[2]=-.99;var d=t.vertical?["right","middle"]:["middle","bottom"],f=[0,1],g=[0,0];t.vertical?(g[0]=-t.tickLabelPixelOffset,t.topTitle?(a[0]=t.boxPosition[0]+.5*t.boxSize[0],a[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),a,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],l)):(a[0]=t.barPosition[0]+t.barSize[0],a[1]=t.barPosition[1]+.5*t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),a,["middle","top"],"vertical",[t.axisTitlePixelOffset,0],l)),f=[-1,0]):(g[1]=t.tickLabelPixelOffset,a[0]=t.barPosition[0]+.5*t.barSize[0],a[1]=t.barPosition[1]+t.barSize[1],e.createPolyDataForOneLabel(t.renderable.getAxisLabel(),a,["middle","bottom"],"horizontal",[0,t.axisTitlePixelOffset],l)),a[c]=t.barPosition[c]+(.5*f[c]+.5)*t.barSize[c],a[u]=t.barPosition[u]+.5*t.barSize[u];for(var p=null,m=0;m<t.barSegments.length;m++){var h=t.barSegments[m];"ticks"===h.title?p=h:(a[u]=t.barPosition[u]+.5*t.barSize[u]*(h.corners[2][u]+h.corners[0][u]),e.createPolyDataForOneLabel(h.title,a,d,"horizontal",g,l))}for(var v=t.barPosition[u]+t.barSize[u]*p.corners[0][u],b=t.barSize[u]*(p.corners[2][u]-p.corners[0][u]),y=e.getTicks(),x=e.getTickStrings(),T=0;T<y.length;T++){var P=(y[T]-t.lastTickBounds[0])/(t.lastTickBounds[1]-t.lastTickBounds[0]);a[u]=v+b*P,e.createPolyDataForOneLabel(x[T],a,d,"horizontal",g,l)}var S=e5.ZP.newInstance({numberOfComponents:2,values:s,name:"TextureCoordinates"});t.tmPolyData.getPointData().setTCoords(S),t.tmPolyData.getPoints().setData(o,3),t.tmPolyData.getPoints().modified(),t.tmPolyData.getPolys().setData(i,1),t.tmPolyData.getPolys().modified(),t.tmPolyData.modified()},e.updatePolyDataForBarSegments=function(){var e,r,n=t.renderable.getScalarsToColors(),o=0;t.renderable.getDrawNanAnnotation()&&n.getNanColor()&&(o+=1),t.renderable.getDrawBelowRangeSwatch()&&null!==(e=n.getUseBelowRangeColor)&&void 0!==e&&e.call(n)&&(o+=1),t.renderable.getDrawAboveRangeSwatch()&&null!==(r=n.getUseAboveRangeColor)&&void 0!==r&&r.call(n)&&(o+=1);var i=4*(1+o),s=1;n.getVectorMode()===t$.COMPONENT&&(s=n.getVectorComponent()+1);for(var l=new Float64Array(3*i),c=new Uint16Array(5*i),u=new Float32Array(i*s),d=0,f=0,g=0;g<t.barSegments.length;g++){for(var p=t.barSegments[g],m=0;m<4;m++){a[0]=t.barPosition[0]+p.corners[m][0]*t.barSize[0],a[1]=t.barPosition[1]+p.corners[m][1]*t.barSize[1],l[3*d]=(.5*a[0]+.5)*t.lastSize[0],l[3*d+1]=(.5*a[1]+.5)*t.lastSize[1],l[3*d+2]=a[2];for(var h=0;h<s;h++)u[d*s+h]=t.lastTickBounds[0]+p.scalars[m]*(t.lastTickBounds[1]-t.lastTickBounds[0]);d++}c[5*f]=4,c[5*f+1]=d-4,c[5*f+2]=d-3,c[5*f+3]=d-2,c[5*f+4]=d-1,f++}var v=e5.ZP.newInstance({numberOfComponents:s,values:u,name:"Scalars"});t.polyData.getPointData().setScalars(v),t.polyData.getPoints().setData(l,3),t.polyData.getPoints().modified(),t.polyData.getPolys().setData(c,1),t.polyData.getPolys().modified(),t.polyData.modified()}},"vtkScalarBarActorHelper");function tQ(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,tK({automated:!0,autoLayout:null,axisLabel:"Scalar Value",barPosition:[0,0],barSize:[0,0],boxPosition:[.88,-.92],boxSize:[.1,1.1],scalarToColors:null,axisTitlePixelOffset:36,axisTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:18,fontFamily:"serif"},tickLabelPixelOffset:14,tickTextStyle:{fontColor:"white",fontStyle:"normal",fontSize:14,fontFamily:"serif"},generateTicks:null,drawNanAnnotation:!0,drawBelowRangeSwatch:!0,drawAboveRangeSwatch:!0},r)),t.autoLayout||(t.autoLayout=tX(e,t)),t.generateTicks||(t.generateTicks=tY()),e3.ZP.extend(e,t,r),e.getProperty().setDiffuse(0),e.getProperty().setAmbient(1),R.default.setGet(e,t,["automated","autoLayout","axisTitlePixelOffset","axisLabel","scalarsToColors","tickLabelPixelOffset","generateTicks","drawNanAnnotation","drawBelowRangeSwatch","drawAboveRangeSwatch"]),R.default.get(e,t,["axisTextStyle","tickTextStyle"]),R.default.getArray(e,t,["barPosition","barSize","boxPosition","boxSize"]),R.default.setArray(e,t,["barPosition","barSize","boxPosition","boxSize"],2),t.classHierarchy.push("vtkScalarBarActor"),e.setTickTextStyle=function(r){t.tickTextStyle=tK(tK({},t.tickTextStyle),r),e.modified()},e.setAxisTextStyle=function(r){t.axisTextStyle=tK(tK({},t.axisTextStyle),r),e.modified()},e.resetAutoLayoutToDefault=function(){e.setAutoLayout(tX(e,t))},e.resetGenerateTicksToDefault=function(){e.setGenerateTicks(tY())}}var t0={newInstance:R.default.newInstance(tQ,"vtkScalarBarActor"),extend:tQ,newScalarBarActorHelper:tJ},t1={},t2=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,t1,r),tx.Z.extend(e,t,r),t.scalarBarActorHelper=t0.newScalarBarActorHelper(),t.classHierarchy.push("vtkOpenGLScalarBarActor"),e.buildPass=function(r){r&&(t._openGLRenderer=e.getFirstAncestorOfType("vtkOpenGLRenderer"),t._openGLRenderWindow=t._openGLRenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var a=t._openGLRenderer?t._openGLRenderer.getRenderable().getActiveCamera():null,n=t._openGLRenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([n.usize,n.vsize],a,t._openGLRenderWindow.getRenderable())}}},"vtkOpenGLScalarBarActor");(0,tT.vw)("vtkScalarBarActor",t2),r(51870),r(18067),r(21538),r(4510),r(87324);var t3=r(81927),t4=r(32249),t5=t3.ZP.CoordinateSystem,t6={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0},t8=R.default.newInstance(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,t6,r),tx.Z.extend(e,t,r),t.keyMatricesTime={},R.default.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},R.default.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],t.classHierarchy.push("vtkWebGPUActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||!t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.queryPass=function(e,r){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount())},e.getBufferShift=function(r){return e.getKeyMatrices(r),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.renderable.computeMatrix();var r=t.renderable.getMatrix();t.bufferShift[0]=r[3],t.bufferShift[1]=r[7],t.bufferShift[2]=r[11];var a=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===t5.WORLD&&(t.bufferShift[0]-=a[0],t.bufferShift[1]-=a[1],t.bufferShift[2]-=a[2]),G.transpose(t.keyMatrices.bcwc,r),t.renderable.getIsIdentity()?G.identity(t.keyMatrices.normalMatrix):(G.copy(t.keyMatrices.normalMatrix,t.keyMatrices.bcwc),t.keyMatrices.normalMatrix[3]=0,t.keyMatrices.normalMatrix[7]=0,t.keyMatrices.normalMatrix[11]=0,G.invert(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix),G.transpose(t.keyMatrices.normalMatrix,t.keyMatrices.normalMatrix)),G.translate(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===t5.WORLD?G.translate(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-a[0],-a[1],-a[2]]):G.copy(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}});(0,t4.vw)("vtkActor",t8);var t7=t3.ZP.CoordinateSystem,t9={keyMatricesTime:null,keyMatrices:null,propID:void 0,bufferShift:void 0},re=R.default.newInstance(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,t9,r),tx.Z.extend(e,t,r),t.keyMatricesTime={},R.default.obj(t.keyMatricesTime,{mtime:0}),t.keyMatrices={normalMatrix:new Float64Array(16),bcwc:new Float64Array(16),bcsc:new Float64Array(16)},R.default.get(e,t,["propID","keyMatricesTime"]),t.bufferShift=[0,0,0,0],t.classHierarchy.push("vtkWebGPUActor2D"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getFirstAncestorOfType("vtkWebGPURenderWindow"),void 0===t.propID&&(t.propID=t.WebGPURenderWindow.getUniquePropID()),e.prepareNodes(),e.addMissingNode(t.renderable.getMapper()),e.removeUnusedNodes())},e.traverseOpaquePass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||!t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.traverseTranslucentPass=function(r){!t.renderable||!t.renderable.getNestedVisibility()||t.renderable.getIsOpaque()||t.WebGPURenderer.getSelector()&&!t.renderable.getNestedPickable()||(e.apply(r,!0),t.children[0]&&t.children[0].traverse(r),e.apply(r,!1))},e.queryPass=function(e,r){e&&t.renderable&&t.renderable.getVisibility()&&(t.renderable.getIsOpaque()?r.incrementOpaqueActorCount():r.incrementTranslucentActorCount())},e.getBufferShift=function(r){return e.getKeyMatrices(r),t.bufferShift},e.getKeyMatrices=function(e){if(Math.max(t.renderable.getMTime(),e.getStabilizedTime())>t.keyMatricesTime.getMTime()){t.bufferShift[0]=0,t.bufferShift[1]=0,t.bufferShift[2]=0;var r=e.getStabilizedCenterByReference();t.renderable.getCoordinateSystem()===t7.WORLD&&(t.bufferShift[0]-=r[0],t.bufferShift[1]-=r[1],t.bufferShift[2]-=r[2]),G.identity(t.keyMatrices.bcwc),G.identity(t.keyMatrices.normalMatrix),G.translate(t.keyMatrices.bcwc,t.keyMatrices.bcwc,[-t.bufferShift[0],-t.bufferShift[1],-t.bufferShift[2]]),t.renderable.getCoordinateSystem()===t7.WORLD?G.translate(t.keyMatrices.bcsc,t.keyMatrices.bcwc,[-r[0],-r[1],-r[2]]):G.copy(t.keyMatrices.bcsc,t.keyMatrices.bcwc),t.keyMatricesTime.modified()}return t.keyMatrices}});(0,t4.vw)("vtkActor2D",re);var rt={},rr=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rt,r),tx.Z.extend(e,t,r),t.CubeAxesActorHelper=ty.newCubeAxesActorHelper(),t.classHierarchy.push("vtkWebGPUCubeAxesActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.CubeAxesActorHelper.getRenderable()||t.CubeAxesActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.CubeAxesActorHelper.getTmActor()),e.addMissingNode(t.renderable.getGridActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var a=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,n=t.WebGPURenderer.getTiledSizeAndOrigin();t.CubeAxesActorHelper.updateAPISpecificData([n.usize,n.vsize],a,t.WebGPURenderWindow.getRenderable())}}},"vtkWebGPUCubeAxesActor");(0,t4.vw)("vtkCubeAxesActor",rr);var ra=r(22472),rn=r(35600),ro=r(73649),ri=r(2988);function rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var rl=tE.DisplayLocation,rc={color:[1,1,1],opacity:1,pointSize:1,lineWidth:1,representation:ri.hX.SURFACE,displayLocation:rl.FOREGROUND};function ru(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rc,r),R.default.obj(e,t),R.default.setGet(e,t,["opacity","lineWidth","pointSize","displayLocation","representation"]),R.default.setGetArray(e,t,["color"],3),t.classHierarchy.push("vtkProperty2D"),e.setDisplayLocationToBackground=function(){return e.setDisplayLocation(rl.BACKGROUND)},e.setDisplayLocationToForeground=function(){return e.setDisplayLocation(rl.FOREGROUND)},e.setRepresentationToWireframe=function(){return e.setRepresentation(ri.hX.WIREFRAME)},e.setRepresentationToSurface=function(){return e.setRepresentation(ri.hX.SURFACE)},e.setRepresentationToPoints=function(){return e.setRepresentation(ri.hX.POINTS)},e.getRepresentationAsString=function(){return R.default.enumToString(ri.hX,t.representation)}}var rd=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rs(Object(r),!0).forEach(function(t){(0,U.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({newInstance:R.default.newInstance(ru,"vtkProperty2D"),extend:ru},tE),rf=r(61031),rg=r(90610),rp=r(81381),rm=r(96442),rh=ra.ZP.BufferUsage,rv=ra.ZP.PrimitiveTypes,rb=ro.ZP.Representation,ry=e6.ZP.ScalarMode,rx=t3.ZP.CoordinateSystem,rT=rd.DisplayLocation;function rP(e){return e.indexOf("edge")>=0}var rS={is2D:!1,cellArray:null,currentInput:null,cellOffset:0,primitiveType:0,colorTexture:null,renderEncoder:null,textures:null};function rC(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rS,r),rp.ZP.extend(e,t,r),t.fragmentShaderTemplate='\nstruct PBRData {\n  diffuse: vec3<f32>,\n  specular: vec3<f32>,\n}\n\n// Dot product with the max already in it\nfn mdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  return max(0.0, dot(a, b));\n}\n// Dot product with a max in it that does not allow for negative values\n// Physically based rendering is accurate as long as normals are accurate,\n// however this is pretty often not the case. In order to prevent negative\n// values from ruining light calculations and creating zones of zero light,\n// this remapping is used, which smoothly clamps the dot product between\n// zero and one while still maintaining a good amount of accuracy.\nfn cdot(a: vec3<f32>, b: vec3<f32>) -> f32 {\n  var d: f32 = max(0.0, dot(a, b));\n  d = pow((d + 1) / 2.0, 2.6);\n  return d;\n}\n\n// Lambertian diffuse model\nfn lambertDiffuse(base: vec3<f32>, N: vec3<f32>, L: vec3<f32>) -> vec3<f32> {\n  var pi: f32 = 3.14159265359; \n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5);\n  return (base/pi)*NdotL;\n}\n\n// Yasuhiro Fujii improvement on the Oren-Nayar model\n// https://mimosa-pudica.net/improved-oren-nayar.html\n// p is surface color, o is roughness\nfn fujiiOrenNayar(p: vec3<f32>, o: f32, N: vec3<f32>, L: vec3<f32>, V: vec3<f32>) -> vec3<f32> {\n  var invpi: f32 = 0.31830988618; // 1/pi\n\n  var o2 = o*o;\n  var NdotL: f32 = mdot(N, L);\n  NdotL = pow(NdotL, 1.5); // Less physically accurate, but hides the "seams" between lights better\n\n  var NdotV: f32 = mdot(N, V);\n  var LdotV: f32 = mdot(L, V);\n\n  var s: f32 = LdotV - NdotL*NdotV;\n  var t: f32 = mix(1, max(NdotL, NdotV), step(0, s)); // Mix with step is the equivalent of an if statement\n  var A: vec3<f32> = 0.5*(o2 / (o2 + 0.33)) + 0.17*p*(o2 / (o2 + 0.13));\n  A = invpi*(1 - A);\n  var B: f32 = 0.45*(o2 / (o2 + 0.09));\n  B = invpi*B;\n\n  return p*NdotL*(A + B*(s/t));\n}\n\n// Fresnel portion of BRDF (IOR only, simplified)\nfn schlickFresnelIOR(V: vec3<f32>, N: vec3<f32>, ior: f32, k: f32) -> f32 {\n  var NdotV: f32 = mdot(V, N);\n  var F0: f32 = (pow((ior - 1.0), 2) + k*k) / (pow((ior + 1.0), 2) + k*k); // This takes into account the roughness, which the other one does not\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Fresnel portion of BRDF (Color ior, better)\nfn schlickFresnelRGB(V: vec3<f32>, N: vec3<f32>, F0: vec3<f32>) -> vec3<f32> {\n  var NdotV: f32 = mdot(V, N);\n  return F0 + (1 - F0) * pow((1-NdotV), 5); \n}\n\n// Normal portion of BRDF\n// https://learnopengl.com/PBR/Theory\n// Trowbridge-Reitz GGX functions: normal, halfway, roughness^2\nfn trGGX(N: vec3<f32>, H: vec3<f32>, a: f32) -> f32 {\n  var pi: f32 = 3.14159265359; \n\n  var a2: f32 = a*a;\n  var NdotH = mdot(N, H);\n  var NdotH2 = NdotH*NdotH;\n  \n  var denom: f32 = NdotH2 * (a2 - 1.0) + 1.0;\n\n  return a2 / max((pi*denom*denom), 0.000001);\n}\n\n// A VERY bad approximation of anisotropy. Real anisotropic calculations require tangent and bitangent\nfn anisotrophicTrGGX(N: vec3<f32>, H: vec3<f32>, O: vec3<f32>, s: f32, a: f32) -> f32 {\n  var Op: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(O) * s, 0.)).xyz;\n\n  var ggx1: f32 = trGGX(N + Op*s, H, a);\n  var ggx2: f32 = trGGX(N - Op*s, H, a);\n  return (0.5 * ggx1 + 0.5 * ggx2);\n}\n\n// Geometry portion of BRDF\nfn schlickGGX(N: vec3<f32>, X: vec3<f32>, k: f32) -> f32 {\n  var NdotX = cdot(N, X);\n  return NdotX / max(0.000001, (NdotX*(1-k) + k));\n}\n\nfn smithSurfaceRoughness(N: vec3<f32>, V: vec3<f32>, L: vec3<f32>, k: f32) -> f32 {\n  var ggx1: f32 = min(1, schlickGGX(N, V, k));\n  var ggx2: f32 = min(1, schlickGGX(N, L, k));\n  return ggx1*ggx2;\n}\n\n// BRDF Combination\nfn cookTorrance(D: f32, F: f32, G: f32, N: vec3<f32>, V: vec3<f32>, L: vec3<f32>) -> f32 {\n  var num: f32 = D*F*G;\n  var denom: f32 = 4*cdot(V, N)*cdot(L, N);\n\n  return num / max(denom, 0.000001);\n}\n\n// Different lighting calculations for different light sources\nfn calcDirectionalLight(N: vec3<f32>, V: vec3<f32>, ior: f32, roughness: f32, metallic: f32, direction: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {  \n  var L: vec3<f32> = normalize(direction); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2;\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L); // Fresnel term is replaced with 1 because it is added later\n  var incoming: vec3<f32> = color;\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5);\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  // Oren-Nayar gives a clay-like effect when fully rough which some people may not want, so it might be better to give a separate\n  // control property for the diffuse vs specular roughness\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V); \n  // Stores the specular and diffuse separately to allow for finer post processing\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// TODO: find some way to reduce the number of arguments going in here\nfn calcPointLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos); // Light Vector\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  var incoming: vec3<f32> = color * (1. / (dist*dist));\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// For a reason unknown to me, spheres dont seem to behave propperly with head-on spot lights\nfn calcSpotLight(N: vec3<f32>, V: vec3<f32>, fragPos: vec3<f32>, ior: f32, roughness: f32, metallic: f32, position: vec3<f32>, direction: vec3<f32>, cones: vec2<f32>, color: vec3<f32>, base: vec3<f32>) -> PBRData {\n  var L: vec3<f32> = normalize(position - fragPos);\n  var H: vec3<f32> = normalize(L + V); // Halfway Vector\n  var dist = distance(position, fragPos);\n\n  var alpha = roughness*roughness;\n  var k: f32 = alpha*alpha / 2; // could also be pow(alpha + 1.0, 2) / 8\n\n  var D: f32 = trGGX(N, H, alpha); // Distribution\n  // var F: f32 = schlickFresnelIOR(V, N, ior, k); // Fresnel\n  var G: f32 = smithSurfaceRoughness(N, V, L, k); // Geometry\n\n  var brdf: f32 = cookTorrance(D, 1, G, N, V, L);  \n  \n  // Cones.x is the inner phi and cones.y is the outer phi\n  var theta: f32 = mdot(normalize(direction), L);\n  var epsilon: f32 = cones.x - cones.y;\n  var intensity: f32 = (theta - cones.y) / epsilon;\n  intensity = clamp(intensity, 0.0, 1.0);\n  intensity /= dist*dist;\n\n  var incoming: vec3<f32> = color * intensity;\n\n  var angle: f32 = mdot(L, N);\n  angle = pow(angle, 1.5); // Smoothing factor makes it less accurate, but reduces ugly "seams" bewteen light sources\n\n  var specular: vec3<f32> = brdf*incoming*angle;\n  var diffuse: vec3<f32> = incoming*fujiiOrenNayar(base, roughness, N, L, V);\n\n  // Stores the specular and diffuse separately to allow for finer post processing\n  // Could also be done (propably more properly) with a struct\n  var out = PBRData(diffuse, specular);\n  \n  return out; // Returns angle along with color of light so the final color can be multiplied by angle as well (creates black areas)\n}\n\n// Environment mapping stuff\n// Takes in a vector and converts it to an equivalent coordinate in a rectilinear texture. Should be replaced with cubemaps at some point\nfn vecToRectCoord(dir: vec3<f32>) -> vec2<f32> {\n  var tau: f32 = 6.28318530718;\n  var pi: f32 = 3.14159265359;\n  var out: vec2<f32> = vec2<f32>(0.0);\n\n  out.x = atan2(dir.z, dir.x) / tau;\n  out.x += 0.5;\n\n  var phix: f32 = length(vec2(dir.x, dir.z));\n  out.y = atan2(dir.y, phix) / pi + 0.5;\n\n  return out;\n}\n\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::TCoord::Dec\n\n// optional surface normal declaration\n//VTK::Normal::Dec\n\n//VTK::Select::Dec\n\n//VTK::RenderEncoder::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@fragment\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : fragmentOutput;\n\n  // Temporary ambient, diffuse, and opacity\n  var ambientColor: vec4<f32> = mapperUBO.AmbientColor;\n  var diffuseColor: vec4<f32> = mapperUBO.DiffuseColor;\n  var opacity: f32 = mapperUBO.Opacity;\n\n  // This should be declared somewhere else\n  var _diffuseMap: vec4<f32> = vec4<f32>(1);\n  var _roughnessMap: vec4<f32> = vec4<f32>(1);\n  var _metallicMap: vec4<f32> = vec4<f32>(1);\n  var _normalMap: vec4<f32> = vec4<f32>(0, 0, 1, 0); // normal map was setting off the normal vector detection in fragment\n  var _ambientOcclusionMap: vec4<f32> = vec4<f32>(1);\n  var _emissionMap: vec4<f32> = vec4<f32>(0);\n\n  //VTK::Color::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Normal::Impl\n\n  var computedColor: vec4<f32> = vec4<f32>(diffuseColor.rgb, 1.0);\n\n  //VTK::Light::Impl\n\n  //VTK::Select::Impl\n\n  if (computedColor.a == 0.0) { discard; };\n\n  //VTK::Position::Impl\n\n  //VTK::RenderEncoder::Impl\n\n  return output;\n}\n',t.vertexShaderTemplate="\n//VTK::Renderer::Dec\n\n//VTK::Color::Dec\n\n//VTK::Normal::Dec\n\n//VTK::TCoord::Dec\n\n//VTK::Select::Dec\n\n//VTK::Mapper::Dec\n\n//VTK::IOStructs::Dec\n\n@vertex\nfn main(\n//VTK::IOStructs::Input\n)\n//VTK::IOStructs::Output\n{\n  var output : vertexOutput;\n\n  var vertex: vec4<f32> = vertexBC;\n\n  //VTK::Color::Impl\n\n  //VTK::Normal::Impl\n\n  //VTK::TCoord::Impl\n\n  //VTK::Select::Impl\n\n  //VTK::Position::Impl\n\n  return output;\n}\n",t._tmpMat3=rn.identity(new Float64Array(9)),t._tmpMat4=G.identity(new Float64Array(16)),t.UBO=rg.ZP.newInstance({label:"mapperUBO"}),t.UBO.addEntry("BCWCMatrix","mat4x4<f32>"),t.UBO.addEntry("BCSCMatrix","mat4x4<f32>"),t.UBO.addEntry("MCWCNormals","mat4x4<f32>"),t.UBO.addEntry("AmbientColor","vec4<f32>"),t.UBO.addEntry("DiffuseColor","vec4<f32>"),t.UBO.addEntry("EdgeColor","vec4<f32>"),t.UBO.addEntry("SpecularColor","vec4<f32>"),t.UBO.addEntry("AmbientIntensity","f32"),t.UBO.addEntry("DiffuseIntensity","f32"),t.UBO.addEntry("Roughness","f32"),t.UBO.addEntry("Metallic","f32"),t.UBO.addEntry("Ambient","f32"),t.UBO.addEntry("Normal","f32"),t.UBO.addEntry("Emission","f32"),t.UBO.addEntry("NormalStrength","f32"),t.UBO.addEntry("BaseIOR","f32"),t.UBO.addEntry("SpecularIntensity","f32"),t.UBO.addEntry("LineWidth","f32"),t.UBO.addEntry("Opacity","f32"),t.UBO.addEntry("ZValue","f32"),t.UBO.addEntry("PropID","u32"),t.UBO.addEntry("ClipNear","f32"),t.UBO.addEntry("ClipFar","f32"),t.UBO.addEntry("Time","u32"),(0,R.g2)(e,t,["cellArray","currentInput","cellOffset","is2D","primitiveType","renderEncoder"]),t.textures=[],t.classHierarchy.push("vtkWebGPUCellArrayMapper"),e.buildPass=function(r){r&&(t.is2D?(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.forceZValue=!0):(t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.forceZValue=!1),t.coordinateSystem=t.WebGPUActor.getRenderable().getCoordinateSystem(),t.useRendererMatrix=t.coordinateSystem!==rx.DISPLAY,t.WebGPURenderer=t.WebGPUActor.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.device=t.WebGPURenderWindow.getDevice())},e.translucentPass=function(r){r&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.opaquePass=function(r){r&&(e.prepareToDraw(t.WebGPURenderer.getRenderEncoder()),t.renderEncoder.registerDrawCallback(t.pipeline,e.draw))},e.updateUBO=function(){var r=t.WebGPUActor.getRenderable().getProperty(),a=t.UBO.getSendTime();if(e.getMTime()>a||r.getMTime()>a||t.renderable.getMTime()>a){var n,o=t.WebGPUActor.getKeyMatrices(t.WebGPURenderer);if(t.UBO.setArray("BCWCMatrix",o.bcwc),t.UBO.setArray("BCSCMatrix",o.bcsc),t.UBO.setArray("MCWCNormals",o.normalMatrix),t.is2D){t.UBO.setValue("ZValue",t.WebGPUActor.getRenderable().getProperty().getDisplayLocation()===rT.FOREGROUND?1:0);var i=r.getColorByReference();t.UBO.setValue("AmbientIntensity",1),t.UBO.setArray("DiffuseColor",[i[0],i[1],i[2],1]),t.UBO.setValue("DiffuseIntensity",0),t.UBO.setValue("SpecularIntensity",0)}else{var s=r.getAmbientColorByReference();t.UBO.setValue("AmbientIntensity",r.getAmbient()),t.UBO.setArray("AmbientColor",[s[0],s[1],s[2],1]),t.UBO.setValue("DiffuseIntensity",r.getDiffuse()),s=r.getDiffuseColorByReference(),t.UBO.setArray("DiffuseColor",[s[0],s[1],s[2],1]),t.UBO.setValue("Roughness",r.getRoughness()),t.UBO.setValue("BaseIOR",r.getBaseIOR()),t.UBO.setValue("Metallic",r.getMetallic()),t.UBO.setValue("NormalStrength",r.getNormalStrength()),t.UBO.setValue("Emission",r.getEmission()),t.UBO.setValue("SpecularIntensity",r.getSpecular()),s=r.getSpecularColorByReference(),t.UBO.setArray("SpecularColor",[s[0],s[1],s[2],1])}var l=null===(n=r.getEdgeColorByReference)||void 0===n?void 0:n.call(r);l&&t.UBO.setArray("EdgeColor",[l[0],l[1],l[2],1]),t.UBO.setValue("LineWidth",r.getLineWidth()),t.UBO.setValue("Opacity",r.getOpacity()),t.UBO.setValue("PropID",t.WebGPUActor.getPropID());var c=t.WebGPURenderWindow.getDevice();t.UBO.sendIfNeeded(c)}},e.haveWideLines=function(){var e=t.WebGPUActor.getRenderable(),r=e.getProperty().getRepresentation();return!(1>=e.getProperty().getLineWidth())&&t.primitiveType!==rv.Verts&&(t.primitiveType!==rv.Triangles&&t.primitiveType!==rv.TriangleStrips||r===rb.WIREFRAME)},e.replaceShaderPosition=function(r,a,n){var o=a.getShaderDescription("vertex");o.addBuiltinOutput("vec4<f32>","@builtin(position) Position"),o.hasOutput("vertexVC")||o.addOutput("vec4<f32>","vertexVC");var i=o.getCode();t.useRendererMatrix?(i=rf.ZP.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = rendererUBO.SCPCMatrix*mapperUBO.BCSCMatrix*vertexBC;","    output.vertexVC = rendererUBO.SCVCMatrix * mapperUBO.BCSCMatrix * vec4<f32>(vertexBC.xyz, 1.0);","//VTK::Position::Impl"]).result,t.forceZValue&&(i=rf.ZP.substitute(i,"//VTK::Position::Impl",["pCoord = vec4<f32>(pCoord.xyz/pCoord.w, 1.0);","pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)):(i=rf.ZP.substitute(i,"//VTK::Position::Impl",["    var pCoord: vec4<f32> = mapperUBO.BCSCMatrix*vertexBC;","    pCoord.x = 2.0* pCoord.x / rendererUBO.viewportSize.x - 1.0;","    pCoord.y = 2.0* pCoord.y / rendererUBO.viewportSize.y - 1.0;","    pCoord.z = 0.5 - 0.5 * pCoord.z;","//VTK::Position::Impl"]).result,t.forceZValue&&(i=rf.ZP.substitute(i,"//VTK::Position::Impl",["    pCoord.z = mapperUBO.ZValue;","//VTK::Position::Impl"]).result)),e.haveWideLines()&&(o.addBuiltinInput("u32","@builtin(instance_index) instanceIndex"),i=rf.ZP.substitute(i,"//VTK::Position::Impl",["    var tmpPos: vec4<f32> = pCoord;","    var numSteps: f32 = ceil(mapperUBO.LineWidth - 1.0);","    var offset: f32 = (mapperUBO.LineWidth - 1.0) * (f32(input.instanceIndex / 2u) - numSteps/2.0) / numSteps;","    var tmpPos2: vec3<f32> = tmpPos.xyz / tmpPos.w;","    tmpPos2.x = tmpPos2.x + 2.0 * (f32(input.instanceIndex) % 2.0) * offset / rendererUBO.viewportSize.x;","    tmpPos2.y = tmpPos2.y + 2.0 * (f32(input.instanceIndex + 1u) % 2.0) * offset / rendererUBO.viewportSize.y;","    tmpPos2.z = min(1.0, tmpPos2.z + 0.00001);","    pCoord = vec4<f32>(tmpPos2.xyz * tmpPos.w, tmpPos.w);","//VTK::Position::Impl"]).result),i=rf.ZP.substitute(i,"//VTK::Position::Impl",["    output.Position = pCoord;"]).result,o.setCode(i)},t.shaderReplacements.set("replaceShaderPosition",e.replaceShaderPosition),e.replaceShaderNormal=function(e,r,a){var n=a.getBuffer("normalMC"),o=t.WebGPUActor.getRenderable();if(n){var i=r.getShaderDescription("vertex");i.hasOutput("normalVC")||i.addOutput("vec3<f32>","normalVC",n.getArrayInformation()[0].interpolation),i.hasOutput("tangentVC")||i.addOutput("vec3<f32>","tangentVC",n.getArrayInformation()[0].interpolation),i.hasOutput("bitangentVC")||i.addOutput("vec3<f32>","bitangentVC",n.getArrayInformation()[0].interpolation);var s=i.getCode();s=rf.ZP.substitute(s,"//VTK::Normal::Impl",["  output.normalVC = normalize((rendererUBO.WCVCNormals * mapperUBO.MCWCNormals * normalMC).xyz);","  var c1: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 0, 1));","  var c2: vec3<f32> = cross(output.normalVC, vec3<f32>(0, 1, 0));","  var tangent: vec3<f32> = mix(c1, c2, distance(c1, c2));","  output.tangentVC = normalize(tangent);","  output.bitangentVC = normalize(cross(output.normalVC, tangent));"]).result,i.setCode(s);var l=r.getShaderDescription("fragment");s=l.getCode(),s=o.getProperty().getNormalTexture()?rf.ZP.substitute(s,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  var tangent: vec3<f32> = input.tangentVC;","  var bitangent: vec3<f32> = input.bitangentVC;","  var TCVCMatrix: mat3x3<f32> = mat3x3<f32>(","    tangent.x, bitangent.x, normal.x,","    tangent.y, bitangent.y, normal.y,","    tangent.z, bitangent.z, normal.z,","  );","  var mappedNormal: vec3<f32> = TCVCMatrix * (_normalMap.xyz * 2 - 1);","  normal = mix(normal, mappedNormal, mapperUBO.NormalStrength);","  normal = normalize(normal);"]).result:rf.ZP.substitute(s,"//VTK::Normal::Impl",["  var normal: vec3<f32> = input.normalVC;","  if (!input.frontFacing) { normal = -normal; }","  normal = normalize(normal);"]).result,l.setCode(s)}},t.shaderReplacements.set("replaceShaderNormal",e.replaceShaderNormal),e.replaceShaderLight=function(e,r,a){if(!e.includes("sel")){var n=r.getShaderDescription("vertex");n.hasOutput("vertexVC")||n.addOutput("vec4<f32>","vertexVC");var o=t.WebGPURenderer.getRenderable(),i=r.getShaderDescription("fragment"),s=i.getCode();if(!s.includes("var normal:")||!t.useRendererMatrix||rP(e)||t.is2D||e.includes("sel"))s=rf.ZP.substitute(s,"//VTK::Light::Impl",["  var diffuse: vec3<f32> = diffuseColor.rgb;","  var specular: vec3<f32> = mapperUBO.SpecularColor.rgb * mapperUBO.SpecularColor.a;","  computedColor = vec4<f32>(diffuse * _diffuseMap.rgb, mapperUBO.Opacity);"]).result,i.setCode(s);else{var l,c=["  var pi: f32 = 3.14159265359;","  var fragPos: vec3<f32> = vec3<f32>(input.vertexVC.xyz);","  var V: vec3<f32> = mix(normalize(-fragPos), vec3<f32>(0, 0, 1), f32(rendererUBO.cameraParallel)); // View Vector","  var baseColor: vec3<f32> = _diffuseMap.rgb * diffuseColor.rgb;","  var roughness: f32 = max(0.000001, mapperUBO.Roughness * _roughnessMap.r);","  var metallic: f32 = mapperUBO.Metallic * _metallicMap.r;","  var alpha: f32 = roughness*roughness;","  var ior: f32 = mapperUBO.BaseIOR;","  var k: f32 = alpha*alpha / 2;","  var diffuse: vec3<f32> = vec3<f32>(0.);","  var specular: vec3<f32> = vec3<f32>(0.);","  var emission: vec3<f32> = _emissionMap.rgb * mapperUBO.Emission;","  {","    var i: i32 = 0;","    loop {","      if !(i < rendererUBO.LightCount) { break; }","      switch (i32(rendererLightSSBO.values[i].LightData.x)) {","         // Point Light","         case 0 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var calculated: PBRData = calcPointLight(normal, V, fragPos, ior, roughness, metallic, pos, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","          }","         // Directional light","         case 1 {","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var calculated: PBRData = calcDirectionalLight(normal, V, ior, roughness, metallic, dir, color, baseColor); // diffuseColor.rgb needs to be fixed with a more dynamic diffuse color","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         // Spot Light","         case 2 {","           var color: vec3<f32> = rendererLightSSBO.values[i].LightColor.rgb * rendererLightSSBO.values[i].LightColor.w;","           var pos: vec3<f32> = (rendererLightSSBO.values[i].LightPos).xyz;","           var dir: vec3<f32> = (rendererUBO.WCVCNormals * vec4<f32>(normalize(rendererLightSSBO.values[i].LightDir.xyz), 0.)).xyz;","           dir = normalize(dir);","           var cones: vec2<f32> = vec2<f32>(rendererLightSSBO.values[i].LightData.y, rendererLightSSBO.values[i].LightData.z);","           var calculated: PBRData = calcSpotLight(normal, V, fragPos, ior, roughness, metallic, pos, dir, cones, color, baseColor);","           diffuse += max(vec3<f32>(0), calculated.diffuse);","           specular += max(vec3<f32>(0), calculated.specular);","         }","         default { continue; }","       }","      continuing { i++; }","    }","  }","  var fresnel: f32 = schlickFresnelIOR(V, normal, ior, k); // Fresnel","  fresnel = min(1, fresnel);","  // This could be controlled with its own variable (that isnt base color) for better artistic control","  var fresnelMetallic: vec3<f32> = schlickFresnelRGB(V, normal, baseColor); // Fresnel for metal, takes color into account","  var kS: vec3<f32> = mix(vec3<f32>(fresnel), fresnelMetallic, metallic);","  kS = min(vec3<f32>(1), kS);","  var kD: vec3<f32> = (1.0 - kS) * (1.0 - metallic);","  var PBR: vec3<f32> = mapperUBO.DiffuseIntensity*kD*diffuse + kS*specular;","  PBR += emission;","  computedColor = vec4<f32>(PBR, mapperUBO.Opacity);"];null!==(l=o.getEnvironmentTexture())&&void 0!==l&&l.getImageLoaded()&&c.push("  // To get diffuse IBL, the texture is sampled with normals in worldspace","  var diffuseIBLCoords: vec3<f32> = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(normal, 1.)).xyz;","  var diffuseCoords: vec2<f32> = vecToRectCoord(diffuseIBLCoords);","  // To get specular IBL, the texture is sampled as the worldspace reflection between the normal and view vectors","  // Reflections are first calculated in viewspace, then converted to worldspace to sample the environment","  var VreflN: vec3<f32> = normalize(reflect(-V, normal));","  var reflectionIBLCoords = (transpose(rendererUBO.WCVCNormals) * vec4<f32>(VreflN, 1.)).xyz;","  var specularCoords: vec2<f32> = vecToRectCoord(reflectionIBLCoords);","  var diffuseIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, diffuseCoords, rendererUBO.MaxEnvironmentMipLevel);","  var level = roughness * rendererUBO.MaxEnvironmentMipLevel;","  var specularIBL = textureSampleLevel(EnvironmentTexture, EnvironmentTextureSampler, specularCoords, level);","  var specularIBLContribution: vec3<f32> = specularIBL.rgb*rendererUBO.BackgroundSpecularStrength;","  computedColor += vec4<f32>(specularIBLContribution*kS, 0);","  var diffuseIBLContribution: vec3<f32> = diffuseIBL.rgb*rendererUBO.BackgroundDiffuseStrength;","  diffuseIBLContribution *= baseColor * _ambientOcclusionMap.rgb;","  computedColor += vec4<f32>(diffuseIBLContribution*kD, 0);"),s=rf.ZP.substitute(s,"//VTK::Light::Impl",c).result,i.setCode(s)}}},t.shaderReplacements.set("replaceShaderLight",e.replaceShaderLight),e.replaceShaderColor=function(e,t,r){if(rP(e)){var a=t.getShaderDescription("fragment"),n=a.getCode();n=rf.ZP.substitute(n,"//VTK::Color::Impl",["ambientColor = mapperUBO.EdgeColor;","diffuseColor = mapperUBO.EdgeColor;"]).result,a.setCode(n);return}var o=r.getBuffer("colorVI");if(o){var i=t.getShaderDescription("vertex");i.addOutput("vec4<f32>","color",o.getArrayInformation()[0].interpolation);var s=i.getCode();s=rf.ZP.substitute(s,"//VTK::Color::Impl",["  output.color = colorVI;"]).result,i.setCode(s);var l=t.getShaderDescription("fragment");s=l.getCode(),s=rf.ZP.substitute(s,"//VTK::Color::Impl",["ambientColor = input.color;","diffuseColor = input.color;","opacity = mapperUBO.Opacity * input.color.a;"]).result,l.setCode(s)}},t.shaderReplacements.set("replaceShaderColor",e.replaceShaderColor),e.replaceShaderTCoord=function(e,r,a){if(a.hasAttribute("tcoord")){var n,o,i,s,l,c,u,d,f,g,p,m,h,v,b,y,x,T,P,S,C=r.getShaderDescription("vertex"),O=a.getBuffer("tcoord"),A=rm.Z.getNumberOfComponentsFromBufferFormat(O.getArrayInformation()[0].format),w=C.getCode();C.addOutput("vec".concat(A,"<f32>"),"tcoordVS"),w=rf.ZP.substitute(w,"//VTK::TCoord::Impl",["  output.tcoordVS = tcoord;"]).result,C.setCode(w);var D=r.getShaderDescription("fragment");w=D.getCode();var M=t.WebGPUActor.getRenderable(),B=function(e){return!!e&&e.getDimensionality()===A},I=[];(null!==(n=(o=M.getProperty()).getDiffuseTexture)&&void 0!==n&&null!==(i=n.call(o))&&void 0!==i&&i.getImageLoaded()||M.getTextures()[0]||t.colorTexture)&&(B(null===(P=(S=M.getProperty()).getDiffuseTexture)||void 0===P?void 0:P.call(S))||B(M.getTextures()[0])||B(t.colorTexture))&&I.push("_diffuseMap = textureSample(DiffuseTexture, DiffuseTextureSampler, input.tcoordVS);"),null!==(s=(l=M.getProperty()).getRoughnessTexture)&&void 0!==s&&null!==(c=s.call(l))&&void 0!==c&&c.getImageLoaded()&&B(M.getProperty().getRoughnessTexture())&&I.push("_roughnessMap = textureSample(RoughnessTexture, RoughnessTextureSampler, input.tcoordVS);"),null!==(u=(d=M.getProperty()).getMetallicTexture)&&void 0!==u&&null!==(f=u.call(d))&&void 0!==f&&f.getImageLoaded()&&B(M.getProperty().getMetallicTexture())&&I.push("_metallicMap = textureSample(MetallicTexture, MetallicTextureSampler, input.tcoordVS);"),null!==(g=(p=M.getProperty()).getNormalTexture)&&void 0!==g&&null!==(m=g.call(p))&&void 0!==m&&m.getImageLoaded()&&B(M.getProperty().getNormalTexture())&&I.push("_normalMap = textureSample(NormalTexture, NormalTextureSampler, input.tcoordVS);"),null!==(h=(v=M.getProperty()).getAmbientOcclusionTexture)&&void 0!==h&&null!==(b=h.call(v))&&void 0!==b&&b.getImageLoaded()&&B(M.getProperty().getAmbientOcclusionTexture())&&I.push("_ambientOcclusionMap = textureSample(AmbientOcclusionTexture, AmbientOcclusionTextureSampler, input.tcoordVS);"),null!==(y=(x=M.getProperty()).getEmissionTexture)&&void 0!==y&&null!==(T=y.call(x))&&void 0!==T&&T.getImageLoaded()&&B(M.getProperty().getEmissionTexture())&&I.push("_emissionMap = textureSample(EmissionTexture, EmissionTextureSampler, input.tcoordVS);"),w=rf.ZP.substitute(w,"//VTK::TCoord::Impl",I).result,D.setCode(w)}},t.shaderReplacements.set("replaceShaderTCoord",e.replaceShaderTCoord),e.replaceShaderSelect=function(e,t,r){if(e.includes("sel")){var a=t.getShaderDescription("fragment"),n=a.getCode();n=rf.ZP.substitute(n,"//VTK::Select::Impl",["  var compositeID: u32 = 0u;"]).result,a.setCode(n)}},t.shaderReplacements.set("replaceShaderSelect",e.replaceShaderSelect),e.getUsage=function(e,t){return e===rb.POINTS||t===rv.Points?rh.Verts:t===rv.Lines?rh.Lines:e===rb.WIREFRAME?t===rv.Triangles?rh.LinesFromTriangles:rh.LinesFromStrips:t===rv.Triangles?rh.Triangles:t===rv.TriangleStrips?rh.Strips:t===rv.TriangleEdges?rh.LinesFromTriangles:rh.LinesFromStrips},e.getHashFromUsage=function(e){return"pt".concat(e)},e.getTopologyFromUsage=function(e){switch(e){case rh.Triangles:return"triangle-list";case rh.Verts:return"point-list";case rh.Lines:default:return"line-list"}},e.buildVertexInput=function(){var r,a,n,o=t.currentInput,i=t.cellArray,s=t.primitiveType,l=t.WebGPUActor.getRenderable().getProperty().getRepresentation(),c=t.WebGPURenderWindow.getDevice(),u=!1;s===rv.TriangleEdges&&(u=!0,l=rb.WIREFRAME);var d=t.vertexInput,f=o.getPoints();if(i){var g={hash:"R".concat(l,"P").concat(s).concat(i.getMTime()),usage:rh.Index,cells:i,numberOfPoints:f.getNumberOfPoints(),primitiveType:s,representation:l};n=c.getBufferManager().getBuffer(g),d.setIndexBuffer(n)}else d.setIndexBuffer(null);if(f){var p=t.WebGPUActor.getBufferShift(t.WebGPURenderer),m={hash:"".concat(f.getMTime(),"I").concat(n.getMTime()).concat(p.join(),"float32x4"),usage:rh.PointArray,format:"float32x4",dataArray:f,indexBuffer:n,shift:p,packExtra:!0},h=c.getBufferManager().getBuffer(m);d.addBuffer(h,["vertexBC"])}else d.removeBufferIfPresent("vertexBC");var v=e.getUsage(l,s);if(t._usesCellNormals=!1,t.is2D||v!==rh.Triangles&&v!==rh.Strips)d.removeBufferIfPresent("normalMC");else{var b=o.getPointData().getNormals(),y={format:"snorm8x4",indexBuffer:n,packExtra:!0,shift:0,scale:127};if(b){y.hash="".concat(b.getMTime(),"I").concat(n.getMTime(),"snorm8x4"),y.dataArray=b,y.usage=rh.PointArray;var x=c.getBufferManager().getBuffer(y);d.addBuffer(x,["normalMC"])}else if(s===rv.Triangles){t._usesCellNormals=!0,y.hash="PFN".concat(f.getMTime(),"I").concat(n.getMTime(),"snorm8x4"),y.dataArray=f,y.cells=i,y.usage=rh.NormalsFromPoints;var T=c.getBufferManager().getBuffer(y);d.addBuffer(T,["normalMC"])}else d.removeBufferIfPresent("normalMC")}var P=!1;if(t.renderable.getScalarVisibility()){var S=t.renderable.getColorMapColors();if(S&&!u){var C=t.renderable.getScalarMode(),O=!1;(C===ry.USE_CELL_DATA||C===ry.USE_CELL_FIELD_DATA||C===ry.USE_FIELD_DATA||!o.getPointData().getScalars())&&C!==ry.USE_POINT_FIELD_DATA&&S&&(O=!0);var A={usage:rh.PointArray,format:"unorm8x4",hash:"".concat(O).concat(S.getMTime(),"I").concat(n.getMTime(),"unorm8x4"),dataArray:S,indexBuffer:n,cellData:O,cellOffset:0},w=c.getBufferManager().getBuffer(A);d.addBuffer(w,["colorVI"]),P=!0}}P||d.removeBufferIfPresent("colorVI");var D=null;if((D=null!==(r=(a=t.renderable).getInterpolateScalarsBeforeMapping)&&void 0!==r&&r.call(a)&&t.renderable.getColorCoordinates()?t.renderable.getColorCoordinates():o.getPointData().getTCoords())&&!u){var M=c.getBufferManager().getBufferForPointArray(D,d.getIndexBuffer());d.addBuffer(M,["tcoord"])}else d.removeBufferIfPresent("tcoord")},e.updateTextures=function(){var e,r,a,n,o,i,s,l,c,u,d,f,g,p,m,h=[],v=[],b=null===(e=(r=t.renderable).getColorTextureMap)||void 0===e?void 0:e.call(r);b&&(t.colorTexture||(t.colorTexture=tt.newInstance({label:"polyDataColor"})),t.colorTexture.setInputData(b),v.push(["Diffuse",t.colorTexture]));var y=t.WebGPUActor.getRenderable(),x=t.WebGPURenderer.getRenderable(),T=[];if(null!==(a=(n=y.getProperty()).getDiffuseTexture)&&void 0!==a&&a.call(n)){var P=["Diffuse",y.getProperty().getDiffuseTexture()];T.push(P)}if(y.getTextures()[0]){var S=["Diffuse",y.getTextures()[0]];T.push(S)}if(t.colorTexture){var C=["Diffuse",t.colorTexture];T.push(C)}if(null!==(o=(i=y.getProperty()).getRoughnessTexture)&&void 0!==o&&o.call(i)){var O=["Roughness",y.getProperty().getRoughnessTexture()];T.push(O)}if(null!==(s=(l=y.getProperty()).getMetallicTexture)&&void 0!==s&&s.call(l)){var A=["Metallic",y.getProperty().getMetallicTexture()];T.push(A)}if(null!==(c=(u=y.getProperty()).getNormalTexture)&&void 0!==c&&c.call(u)){var w=["Normal",y.getProperty().getNormalTexture()];T.push(w)}if(null!==(d=(f=y.getProperty()).getAmbientOcclusionTexture)&&void 0!==d&&d.call(f)){var D=["AmbientOcclusion",y.getProperty().getAmbientOcclusionTexture()];T.push(D)}if(null!==(g=(p=y.getProperty()).getEmissionTexture)&&void 0!==g&&g.call(p)){var M=["Emission",y.getProperty().getEmissionTexture()];T.push(M)}if(null!==(m=x.getEnvironmentTexture)&&void 0!==m&&m.call(x)){var B=["Environment",x.getEnvironmentTexture()];T.push(B)}for(var I=0;I<T.length;I++)(T[I][1].getInputData()||T[I][1].getJsImageData()||T[I][1].getCanvas())&&v.push(T[I]),T[I][1].getImage()&&T[I][1].getImageLoaded()&&v.push(T[I]);for(var V=0;V<v.length;V++){var k=v[V][1],L=v[V][0],R=t.device.getTextureManager().getTextureForVTKTexture(k);if(R.getReady()){for(var N=!1,U=0;U<t.textures.length;U++)t.textures[U]===R&&(N=!0,h[U]=!0);if(!N){h[t.textures.length]=!0;var E=R.createView("".concat(L,"Texture"));t.textures.push(R),t.textureViews.push(E);var G=k.getInterpolate()?"linear":"nearest",F=null;k.getEdgeClamp()&&k.getRepeat()&&(F="mirror-repeat"),!F&&k.getEdgeClamp()&&(F="clamp-to-edge"),!F&&k.getRepeat()&&(F="repeat"),"Environment"!==L?E.addSampler(t.device,{addressModeU:F,addressModeV:F,addressModeW:F,minFilter:G,magFilter:G}):E.addSampler(t.device,{addressModeU:"repeat",addressModeV:"clamp-to-edge",addressModeW:"repeat",minFilter:G,magFilter:G,mipmapFilter:"linear"})}}}for(var z=t.textures.length-1;z>=0;z--)h[z]||(t.textures.splice(z,1),t.textureViews.splice(z,1))},e.computePipelineHash=function(){var r="pd".concat(t.useRendererMatrix?"r":"").concat(t.forceZValue?"z":"");if(t.primitiveType===rv.TriangleEdges||t.primitiveType===rv.TriangleStripEdges)r+="edge";else{if(t.vertexInput.hasAttribute("normalMC")&&(r+="n"),t.vertexInput.hasAttribute("colorVI")&&(r+="c"),t.vertexInput.hasAttribute("tcoord")){var a=t.vertexInput.getBuffer("tcoord"),n=rm.Z.getNumberOfComponentsFromBufferFormat(a.getArrayInformation()[0].format);r+="t".concat(n)}t.textures.length&&(r+="tx".concat(t.textures.length))}t._usesCellNormals&&(r+="cn"),t.SSBO&&(r+="ssbo"),r+=e.getHashFromUsage(t.usage)+t.renderEncoder.getPipelineHash(),t.pipelineHash=r},e.updateBuffers=function(){t.primitiveType!==rv.TriangleEdges&&t.primitiveType!==rv.TriangleStripEdges&&e.updateTextures();var r=t.WebGPUActor.getRenderable(),a=r.getProperty().getRepresentation();t.usage=e.getUsage(a,t.primitiveType),e.buildVertexInput();var n=t.vertexInput.getBuffer("vertexBC");if(e.setNumberOfVertices(n.getSizeInBytes()/n.getStrideInBytes()),e.setTopology(e.getTopologyFromUsage(t.usage)),e.updateUBO(),e.haveWideLines()){var o=r.getProperty();e.setNumberOfInstances(Math.ceil(2*o.getLineWidth()))}else e.setNumberOfInstances(1)}}var rO={newInstance:(0,R.WL)(rC,"vtkWebGPUCellArrayMapper"),extend:rC},rA=ra.ZP.PrimitiveTypes,rw={primitives:null},rD=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rw,r),tx.Z.extend(e,t,r),t.primitives=[],t.classHierarchy.push("vtkWebGPUPolyDataMapper"),e.createCellArrayMapper=function(){return rO.newInstance()},e.buildPass=function(r){if(r){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor"),t.renderable.getStatic()||t.renderable.update();var a=t.renderable.getInputData();t.renderable.mapScalars(a,1),e.updateCellArrayMappers(a)}},e.updateCellArrayMappers=function(r){for(var a=[r.getVerts(),r.getLines(),r.getPolys(),r.getStrips()],n=[],o=0,i=rA.Points;i<=rA.Triangles;i++)if(a[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());var s=t.primitives[i];s.setCellArray(a[i]),s.setCurrentInput(r),s.setCellOffset(o),s.setPrimitiveType(i),s.setRenderable(t.renderable),o+=a[i].getNumberOfCells(),n.push(s)}else t.primitives[i]=null;if(t.WebGPUActor.getRenderable().getProperty().getEdgeVisibility())for(var l=rA.TriangleEdges;l<=rA.TriangleStripEdges;l++)if(a[l-2].getNumberOfValues()>0){t.primitives[l]||(t.primitives[l]=e.createCellArrayMapper());var c=t.primitives[l];c.setCellArray(a[l-2]),c.setCurrentInput(r),c.setCellOffset(t.primitives[l-2].getCellOffset()),c.setPrimitiveType(l),c.setRenderable(t.renderable),n.push(c)}else t.primitives[l]=null;e.prepareNodes(),e.addMissingChildren(n),e.removeUnusedNodes()}},"vtkWebGPUPolyDataMapper");function rM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}(0,t4.vw)("vtkMapper",rD);var rB=ra.ZP.PrimitiveTypes,rI=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rM(Object(r),!0).forEach(function(t){(0,U.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({primitives:[]},r)),tx.Z.extend(e,t,r),t.primitives=[],t.classHierarchy.push("vtkWebGPUPolyDataMapper2D"),e.createCellArrayMapper=function(){return rO.newInstance()},e.buildPass=function(r){if(r){t.WebGPUActor=e.getFirstAncestorOfType("vtkWebGPUActor2D"),t.renderable.getStatic()||t.renderable.update();var a=t.renderable.getInputData();t.renderable.mapScalars(a,1),e.updateCellArrayMappers(a)}},e.updateCellArrayMappers=function(r){for(var a=[r.getVerts(),r.getLines(),r.getPolys(),r.getStrips()],n=[],o=0,i=rB.Points;i<=rB.Triangles;i++)if(a[i].getNumberOfValues()>0){t.primitives[i]||(t.primitives[i]=e.createCellArrayMapper());var s=t.primitives[i];s.setCellArray(a[i]),s.setCurrentInput(r),s.setCellOffset(o),s.setPrimitiveType(i),s.setRenderable(t.renderable),s.setIs2D(!0),o+=a[i].getNumberOfCells(),n.push(s)}else t.primitives[i]=null;e.prepareNodes(),e.addMissingChildren(n),e.removeUnusedNodes()}},"vtkWebGPUPolyDataMapper2D");(0,t4.vw)("vtkMapper2D",rI);var rV={},rk=(0,R.WL)(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rV,r),tx.Z.extend(e,t,r),t.scalarBarActorHelper=t0.newScalarBarActorHelper(),t.classHierarchy.push("vtkWebGPUScalarBarActor"),e.buildPass=function(r){r&&(t.WebGPURenderer=e.getFirstAncestorOfType("vtkWebGPURenderer"),t.WebGPURenderWindow=t.WebGPURenderer.getParent(),t.scalarBarActorHelper.getRenderable()||t.scalarBarActorHelper.setRenderable(t.renderable),e.prepareNodes(),e.addMissingNode(t.scalarBarActorHelper.getBarActor()),e.addMissingNode(t.scalarBarActorHelper.getTmActor()),e.removeUnusedNodes())},e.opaquePass=function(e,r){if(e){var a=t.WebGPURenderer?t.WebGPURenderer.getRenderable().getActiveCamera():null,n=t.WebGPURenderer.getTiledSizeAndOrigin();t.scalarBarActorHelper.updateAPISpecificData([n.usize,n.vsize],a,t.WebGPURenderWindow.getRenderable())}}},"vtkWebGPUScalarBarActor");(0,t4.vw)("vtkScalarBarActor",rk);var rL=r(3743),rR=r(58699),rN={texture:null,handle:null,sampler:null,label:null};function rU(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rN,r),R.default.obj(e,t),t.bindGroupLayoutEntry={visibility:GPUShaderStage.VERTEX|GPUShaderStage.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d"}},t.bindGroupTime={},R.default.obj(t.bindGroupTime,{mtime:0}),R.default.get(e,t,["bindGroupTime","texture"]),R.default.setGet(e,t,["bindGroupLayoutEntry","label","sampler"]),t.classHierarchy.push("vtkWebGPUTextureView"),e.create=function(e,r){t.texture=e,t.options=r,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var a=rm.Z.getDetailsFromTextureFormat(t.texture.getFormat());t.bindGroupLayoutEntry.texture.sampleType=a.sampleType},e.createFromTextureHandle=function(e,r){t.texture=null,t.options=r,t.options.dimension=t.options.dimension||"2d",t.options.label=t.label,t.textureHandle=e,t.handle=t.textureHandle.createView(t.options),t.bindGroupLayoutEntry.texture.viewDimension=t.options.dimension;var a=rm.Z.getDetailsFromTextureFormat(r.format);t.bindGroupLayoutEntry.texture.sampleType=a.sampleType,t.bindGroupTime.modified()},e.getBindGroupEntry=function(){return{resource:e.getHandle()}},e.getShaderCode=function(e,r){var a="f32";"sint"===t.bindGroupLayoutEntry.texture.sampleType?a="i32":"uint"===t.bindGroupLayoutEntry.texture.sampleType&&(a="u32");var n="@binding(".concat(e,") @group(").concat(r,") var ").concat(t.label,": texture_").concat(t.options.dimension,"<").concat(a,">;");return"depth"===t.bindGroupLayoutEntry.texture.sampleType&&(n="@binding(".concat(e,") @group(").concat(r,") var ").concat(t.label,": texture_depth_").concat(t.options.dimension,";")),n},e.addSampler=function(r,a){var n=rR.ZP.newInstance({label:"".concat(t.label,"Sampler")});n.create(r,a),e.setSampler(n)},e.getBindGroupTime=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.bindGroupTime},e.getHandle=function(){return t.texture&&t.texture.getHandle()!==t.textureHandle&&(t.textureHandle=t.texture.getHandle(),t.handle=t.textureHandle.createView(t.options),t.bindGroupTime.modified()),t.handle}}var rE={newInstance:R.default.newInstance(rU),extend:rU},rG=ra.ZP.BufferUsage,rF={device:null,handle:null,buffer:null,ready:!1,label:null};R.default.newInstance(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,rF,r),R.default.obj(e,t),R.default.get(e,t,["handle","ready","width","height","depth","format","usage"]),R.default.setGet(e,t,["device","label"]),t.classHierarchy.push("vtkWebGPUTexture"),e.create=function(e,r){t.device=e,t.width=r.width,t.height=r.height,t.depth=r.depth?r.depth:1;var a=1===t.depth?"2d":"3d";t.format=r.format?r.format:"rgba8unorm",t.mipLevel=r.mipLevel?r.mipLevel:0,t.usage=r.usage?r.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label,dimension:a,mipLevelCount:t.mipLevel+1})},e.assignFromHandle=function(e,r,a){t.device=e,t.handle=r,t.width=a.width,t.height=a.height,t.depth=a.depth?a.depth:1,t.format=a.format?a.format:"rgba8unorm",t.usage=a.usage?a.usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST},e.writeImageData=function(r){var a=[];if(r.canvas){t.device.getHandle().queue.copyExternalImageToTexture({source:r.canvas,flipY:r.flip},{texture:t.handle,premultipliedAlpha:!0},[t.width,t.height,t.depth]),t.ready=!0;return}r.jsImageData&&!r.nativeArray&&(r.width=r.jsImageData.width,r.height=r.jsImageData.height,r.depth=1,r.format="rgba8unorm",r.flip=!0,r.nativeArray=r.jsImageData.data);var n=rm.Z.getDetailsFromTextureFormat(t.format),o=t.width*n.stride,i=function(e,t,r){var a=e.length/(t*r)*e.BYTES_PER_ELEMENT,o=2===n.elementSize&&"float"===n.sampleType;if(o||a%256){for(var i=a/e.BYTES_PER_ELEMENT,s=n.elementSize,l=256*Math.floor((i*s+255)/256),c=l/s,u=R.default.newTypedArray(o?"Uint16Array":e.constructor.name,c*t*r),d=0;d<t*r;d++)if(o)for(var f=0;f<i;f++)u[d*c+f]=rL.Z.toHalf(e[d*i+f]);else u.set(e.subarray(d*i,(d+1)*i),d*c);return[u,l]}return[e,a]};if(r.nativeArray&&(a=r.nativeArray),r.image){var s=document.createElement("canvas");s.width=r.image.width,s.height=r.image.height;var l=s.getContext("2d");l.translate(0,s.height),l.scale(1,-1),l.drawImage(r.image,0,0,r.image.width,r.image.height,0,0,s.width,s.height),a=l.getImageData(0,0,r.image.width,r.image.height).data}var c=t.device.createCommandEncoder();if(3!==e.getDimensionality()){for(var u=tt.generateMipmaps(a,t.width,t.height,t.mipLevel),d=t.width,f=t.height,g=0;g<=t.mipLevel;g++){var p=i(u[g],f,1);o=p[1];var m={dataArray:r.dataArray?r.dataArray:null,nativeArray:p[0],usage:rG.Texture},h=t.device.getBufferManager().getBuffer(m);c.copyBufferToTexture({buffer:h.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:f},{texture:t.handle,mipLevel:g},[d,f,1]),d/=2,f/=2}t.device.submitCommandEncoder(c),t.ready=!0}else{var v=i(a,t.height,t.depth);o=v[1];var b={dataArray:r.dataArray?r.dataArray:null,usage:rG.Texture};b.nativeArray=v[0];var y=t.device.getBufferManager().getBuffer(b);c.copyBufferToTexture({buffer:y.getHandle(),offset:0,bytesPerRow:o,rowsPerImage:t.height},{texture:t.handle},[t.width,t.height,t.depth]),t.device.submitCommandEncoder(c),t.ready=!0}},e.getScale=function(){var e=rm.Z.getDetailsFromTextureFormat(t.format);return 2===e.elementSize&&"float"===e.sampleType?1:255},e.getNumberOfComponents=function(){return rm.Z.getDetailsFromTextureFormat(t.format).numComponents},e.getDimensionality=function(){var e=0;return t.width>1&&e++,t.height>1&&e++,t.depth>1&&e++,e},e.resizeToMatch=function(e){(e.getWidth()!==t.width||e.getHeight()!==t.height||e.getDepth()!==t.depth)&&(t.width=e.getWidth(),t.height=e.getHeight(),t.depth=e.getDepth(),t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.resize=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(e!==t.width||r!==t.height||a!==t.depth)&&(t.width=e,t.height=r,t.depth=a,t.handle=t.device.getHandle().createTexture({size:[t.width,t.height,t.depth],format:t.format,usage:t.usage,label:t.label}))},e.createView=function(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.dimension||(a.dimension=1===t.depth?"2d":"3d");var n=rE.newInstance({label:r});return n.create(e,a),n}}),r(66762);var rz=class{constructor(e){let{points:t,type:r}=e.data;this.id=e.id,this.points=t,this.type=r,this.color=e.color,this.segmentIndex=e.segmentIndex,this.sizeInBytes=this._getSizeInBytes()}_getSizeInBytes(){return 0+3*this.points.length}getPoints(){return this.points}getFlatPointsArray(){return this.points.map(e=>[...e]).flat()}getColor(){return this.color}getType(){return this.type}};class rW{constructor(e){this.color=[200,0,0],this.id=e.id,this.contours=[],this.color=e.color??this.color,this.frameOfReferenceUID=e.frameOfReferenceUID,this.segmentIndex=e.segmentIndex,this._createEachContour(e.data),this.sizeInBytes=this._getSizeInBytes()}_createEachContour(e){e.forEach(e=>{let{points:t,type:r,color:a}=e,n=new rz({id:`${this.id}-segment-${this.segmentIndex}`,data:{points:t,type:r,segmentIndex:this.segmentIndex,color:a??this.color},segmentIndex:this.segmentIndex,color:a??this.color});this.contours.push(n)}),this._updateContourSetCentroid()}_updateContourSetCentroid(){let e=this.getTotalNumberOfPoints(),t=this.getFlatPointsArray(),r=t.reduce((e,t)=>[e[0]+t[0],e[1]+t[1],e[2]+t[2]],[0,0,0]),a=[r[0]/e,r[1]/e,r[2]/e],n=t.reduce((e,t)=>{let r=this._getDistance(a,t),n=this._getDistance(a,e);return r<n?t:e},t[0]);this.centroid=n}_getSizeInBytes(){return this.contours.reduce((e,t)=>e+t.sizeInBytes,0)}getCentroid(){return this.centroid}getSegmentIndex(){return this.segmentIndex}getColor(){return this.color}getContours(){return this.contours}getSizeInBytes(){return this.sizeInBytes}getFlatPointsArray(){return this.contours.map(e=>e.getPoints()).flat()}getNumberOfContours(){return this.contours.length}getTotalNumberOfPoints(){return this.contours.reduce((e,t)=>e+t.getPoints().length,0)}getNumberOfPointsArray(){return this.contours.reduce((e,t,r)=>(e[r]=this.getNumberOfPointsInAContour(r),e),[])}getPointsInContour(e){return this.contours[e].getPoints()}getNumberOfPointsInAContour(e){return this.getPointsInContour(e).length}_getDistance(e,t){return Math.sqrt((e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2)}}var rZ=r(57451);async function r_(e,t){let r=P.ZP.getGeometry(e);if(r)return r;if(t.type===rZ.Z.CONTOUR)r=function(e,t){if(!t||0===t.data.length)throw Error("Invalid contour set data, see publicContourSetData type for more info");if(!t.id)throw Error("Invalid contour set data, each contour set must have an id");if(!t.data||!Array.isArray(t.data))throw Error("Invalid contour set data, each contour set must have an array of contours");t.data.forEach(e=>{if(!e.points||!Array.isArray(e.points))throw Error("Invalid contour set data, each contour must have an array of points");e.points.forEach(e=>{if(!e||!Array.isArray(e)||3!==e.length)throw Error("Invalid contour set data, each point must be an array of length 3")})});let r=new rW({id:t.id,data:t.data,color:t.color,frameOfReferenceUID:t.frameOfReferenceUID,segmentIndex:t.segmentIndex}),a={id:e,type:rZ.Z.CONTOUR,data:r,sizeInBytes:r.getSizeInBytes()};return a}(e,t.geometryData);else throw Error("Unknown geometry type, Only CONTOUR is supported");let a={promise:Promise.resolve(r)};return await P.ZP.putGeometryLoadObject(e,a),r}var rH=r(57971),rj=r(818),rK=async function(e,t,r,a=!1,n=!1){r.forEach(t=>{let r=e.getViewport(t);if(!r)throw Error(`Viewport with Id ${t} does not exist`);if(!(r instanceof v.Z))throw Error("setVolumesForViewports only supports VolumeViewport and VolumeViewport3D")});let o=r.map(async r=>{let o=e.getViewport(r);await o.setVolumes(t,a,n)});await Promise.all(o)},r$=r(31270)}}]);